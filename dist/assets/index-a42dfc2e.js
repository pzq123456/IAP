var pi=Object.defineProperty;var gi=(n,t,e)=>t in n?pi(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var R=(n,t,e)=>(gi(n,typeof t!="symbol"?t+"":t,e),e);import"https://cdn.jsdelivr.net/npm/chart.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function mi(n,t,e=20){const i=n;let r=Math.ceil(t.length/e),s=[];for(let o=0;o<r;o++)s.push(xi(t,o*e,(o+1)*e));s.forEach(o=>{const l=document.createElement("div");l.className="toolBarRow",yi(o,l),i.appendChild(l)})}function xi(n,t,e){return n.slice(t,e)}function yi(n,t){n.forEach(({name:e,action:i})=>{const r=document.createElement("button");r.textContent=e,r.addEventListener("click",i),t.appendChild(r)})}function an(n,t){return function(){return n.apply(t,arguments)}}const{toString:wi}=Object.prototype,{getPrototypeOf:be}=Object,jt=(n=>t=>{const e=wi.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),tt=n=>(n=n.toLowerCase(),t=>jt(t)===n),Gt=n=>t=>typeof t===n,{isArray:bt}=Array,vt=Gt("undefined");function bi(n){return n!==null&&!vt(n)&&n.constructor!==null&&!vt(n.constructor)&&W(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const cn=tt("ArrayBuffer");function _i(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&cn(n.buffer),t}const Mi=Gt("string"),W=Gt("function"),hn=Gt("number"),Ht=n=>n!==null&&typeof n=="object",Si=n=>n===!0||n===!1,It=n=>{if(jt(n)!=="object")return!1;const t=be(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},vi=tt("Date"),Ai=tt("File"),Ci=tt("Blob"),Ei=tt("FileList"),Ri=n=>Ht(n)&&W(n.pipe),Li=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||W(n.append)&&((t=jt(n))==="formdata"||t==="object"&&W(n.toString)&&n.toString()==="[object FormData]"))},Pi=tt("URLSearchParams"),Bi=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lt(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),bt(n))for(i=0,r=n.length;i<r;i++)t.call(null,n[i],i,n);else{const s=e?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let l;for(i=0;i<o;i++)l=s[i],t.call(null,n[l],l,n)}}function un(n,t){t=t.toLowerCase();const e=Object.keys(n);let i=e.length,r;for(;i-- >0;)if(r=e[i],t===r.toLowerCase())return r;return null}const dn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),fn=n=>!vt(n)&&n!==dn;function re(){const{caseless:n}=fn(this)&&this||{},t={},e=(i,r)=>{const s=n&&un(t,r)||r;It(t[s])&&It(i)?t[s]=re(t[s],i):It(i)?t[s]=re({},i):bt(i)?t[s]=i.slice():t[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Lt(arguments[i],e);return t}const ki=(n,t,e,{allOwnKeys:i}={})=>(Lt(t,(r,s)=>{e&&W(r)?n[s]=an(r,e):n[s]=r},{allOwnKeys:i}),n),Ti=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Oi=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},Ii=(n,t,e,i)=>{let r,s,o;const l={};if(t=t||{},n==null)return t;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)o=r[s],(!i||i(o,n,t))&&!l[o]&&(t[o]=n[o],l[o]=!0);n=e!==!1&&be(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},Di=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},Ni=n=>{if(!n)return null;if(bt(n))return n;let t=n.length;if(!hn(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},qi=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&be(Uint8Array)),Fi=(n,t)=>{const i=(n&&n[Symbol.iterator]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;t.call(n,s[0],s[1])}},zi=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},ji=tt("HTMLFormElement"),Gi=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,r){return i.toUpperCase()+r}),qe=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),Hi=tt("RegExp"),pn=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};Lt(e,(r,s)=>{let o;(o=t(r,s,n))!==!1&&(i[s]=o||r)}),Object.defineProperties(n,i)},Ui=n=>{pn(n,(t,e)=>{if(W(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(W(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},Vi=(n,t)=>{const e={},i=r=>{r.forEach(s=>{e[s]=!0})};return bt(n)?i(n):i(String(n).split(t)),e},Wi=()=>{},Xi=(n,t)=>(n=+n,Number.isFinite(n)?n:t),$t="abcdefghijklmnopqrstuvwxyz",Fe="0123456789",gn={DIGIT:Fe,ALPHA:$t,ALPHA_DIGIT:$t+$t.toUpperCase()+Fe},$i=(n=16,t=gn.ALPHA_DIGIT)=>{let e="";const{length:i}=t;for(;n--;)e+=t[Math.random()*i|0];return e};function Yi(n){return!!(n&&W(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const Ji=n=>{const t=new Array(10),e=(i,r)=>{if(Ht(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[r]=i;const s=bt(i)?[]:{};return Lt(i,(o,l)=>{const c=e(o,r+1);!vt(c)&&(s[l]=c)}),t[r]=void 0,s}}return i};return e(n,0)},Ki=tt("AsyncFunction"),Qi=n=>n&&(Ht(n)||W(n))&&W(n.then)&&W(n.catch),y={isArray:bt,isArrayBuffer:cn,isBuffer:bi,isFormData:Li,isArrayBufferView:_i,isString:Mi,isNumber:hn,isBoolean:Si,isObject:Ht,isPlainObject:It,isUndefined:vt,isDate:vi,isFile:Ai,isBlob:Ci,isRegExp:Hi,isFunction:W,isStream:Ri,isURLSearchParams:Pi,isTypedArray:qi,isFileList:Ei,forEach:Lt,merge:re,extend:ki,trim:Bi,stripBOM:Ti,inherits:Oi,toFlatObject:Ii,kindOf:jt,kindOfTest:tt,endsWith:Di,toArray:Ni,forEachEntry:Fi,matchAll:zi,isHTMLForm:ji,hasOwnProperty:qe,hasOwnProp:qe,reduceDescriptors:pn,freezeMethods:Ui,toObjectSet:Vi,toCamelCase:Gi,noop:Wi,toFiniteNumber:Xi,findKey:un,global:dn,isContextDefined:fn,ALPHABET:gn,generateString:$i,isSpecCompliantForm:Yi,toJSONObject:Ji,isAsyncFn:Ki,isThenable:Qi};function B(n,t,e,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),r&&(this.response=r)}y.inherits(B,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:y.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const mn=B.prototype,xn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{xn[n]={value:n}});Object.defineProperties(B,xn);Object.defineProperty(mn,"isAxiosError",{value:!0});B.from=(n,t,e,i,r,s)=>{const o=Object.create(mn);return y.toFlatObject(n,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),B.call(o,n.message,t,e,i,r),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const Zi=null;function se(n){return y.isPlainObject(n)||y.isArray(n)}function yn(n){return y.endsWith(n,"[]")?n.slice(0,-2):n}function ze(n,t,e){return n?n.concat(t).map(function(r,s){return r=yn(r),!e&&s?"["+r+"]":r}).join(e?".":""):t}function tr(n){return y.isArray(n)&&!n.some(se)}const er=y.toFlatObject(y,{},null,function(t){return/^is[A-Z]/.test(t)});function Ut(n,t,e){if(!y.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=y.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!y.isUndefined(b[g])});const i=e.metaTokens,r=e.visitor||h,s=e.dots,o=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&y.isSpecCompliantForm(t);if(!y.isFunction(r))throw new TypeError("visitor must be a function");function a(p){if(p===null)return"";if(y.isDate(p))return p.toISOString();if(!c&&y.isBlob(p))throw new B("Blob is not supported. Use a Buffer instead.");return y.isArrayBuffer(p)||y.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function h(p,g,b){let m=p;if(p&&!b&&typeof p=="object"){if(y.endsWith(g,"{}"))g=i?g:g.slice(0,-2),p=JSON.stringify(p);else if(y.isArray(p)&&tr(p)||(y.isFileList(p)||y.endsWith(g,"[]"))&&(m=y.toArray(p)))return g=yn(g),m.forEach(function(w,_){!(y.isUndefined(w)||w===null)&&t.append(o===!0?ze([g],_,s):o===null?g:g+"[]",a(w))}),!1}return se(p)?!0:(t.append(ze(b,g,s),a(p)),!1)}const u=[],d=Object.assign(er,{defaultVisitor:h,convertValue:a,isVisitable:se});function f(p,g){if(!y.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(p),y.forEach(p,function(m,x){(!(y.isUndefined(m)||m===null)&&r.call(t,m,y.isString(x)?x.trim():x,g,d))===!0&&f(m,g?g.concat(x):[x])}),u.pop()}}if(!y.isObject(n))throw new TypeError("data must be an object");return f(n),t}function je(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function _e(n,t){this._pairs=[],n&&Ut(n,this,t)}const wn=_e.prototype;wn.append=function(t,e){this._pairs.push([t,e])};wn.toString=function(t){const e=t?function(i){return t.call(this,i,je)}:je;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function nr(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bn(n,t,e){if(!t)return n;const i=e&&e.encode||nr,r=e&&e.serialize;let s;if(r?s=r(t,e):s=y.isURLSearchParams(t)?t.toString():new _e(t,e).toString(i),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class ir{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){y.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Ge=ir,_n={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rr=typeof URLSearchParams<"u"?URLSearchParams:_e,sr=typeof FormData<"u"?FormData:null,or=typeof Blob<"u"?Blob:null,lr=(()=>{let n;return typeof navigator<"u"&&((n=navigator.product)==="ReactNative"||n==="NativeScript"||n==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),ar=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),J={isBrowser:!0,classes:{URLSearchParams:rr,FormData:sr,Blob:or},isStandardBrowserEnv:lr,isStandardBrowserWebWorkerEnv:ar,protocols:["http","https","file","blob","url","data"]};function cr(n,t){return Ut(n,new J.classes.URLSearchParams,Object.assign({visitor:function(e,i,r,s){return J.isNode&&y.isBuffer(e)?(this.append(i,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function hr(n){return y.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ur(n){const t={},e=Object.keys(n);let i;const r=e.length;let s;for(i=0;i<r;i++)s=e[i],t[s]=n[s];return t}function Mn(n){function t(e,i,r,s){let o=e[s++];const l=Number.isFinite(+o),c=s>=e.length;return o=!o&&y.isArray(r)?r.length:o,c?(y.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!l):((!r[o]||!y.isObject(r[o]))&&(r[o]=[]),t(e,i,r[o],s)&&y.isArray(r[o])&&(r[o]=ur(r[o])),!l)}if(y.isFormData(n)&&y.isFunction(n.entries)){const e={};return y.forEachEntry(n,(i,r)=>{t(hr(i),r,e,0)}),e}return null}function dr(n,t,e){if(y.isString(n))try{return(t||JSON.parse)(n),y.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const Me={transitional:_n,adapter:J.isNode?"http":"xhr",transformRequest:[function(t,e){const i=e.getContentType()||"",r=i.indexOf("application/json")>-1,s=y.isObject(t);if(s&&y.isHTMLForm(t)&&(t=new FormData(t)),y.isFormData(t))return r&&r?JSON.stringify(Mn(t)):t;if(y.isArrayBuffer(t)||y.isBuffer(t)||y.isStream(t)||y.isFile(t)||y.isBlob(t))return t;if(y.isArrayBufferView(t))return t.buffer;if(y.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return cr(t,this.formSerializer).toString();if((l=y.isFileList(t))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ut(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||r?(e.setContentType("application/json",!1),dr(t)):t}],transformResponse:[function(t){const e=this.transitional||Me.transitional,i=e&&e.forcedJSONParsing,r=this.responseType==="json";if(t&&y.isString(t)&&(i&&!this.responseType||r)){const o=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?B.from(l,B.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:J.classes.FormData,Blob:J.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};y.forEach(["delete","get","head","post","put","patch"],n=>{Me.headers[n]={}});const Se=Me,fr=y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pr=n=>{const t={};let e,i,r;return n&&n.split(`
`).forEach(function(o){r=o.indexOf(":"),e=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!e||t[e]&&fr[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},He=Symbol("internals");function _t(n){return n&&String(n).trim().toLowerCase()}function Dt(n){return n===!1||n==null?n:y.isArray(n)?n.map(Dt):String(n)}function gr(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const mr=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Yt(n,t,e,i,r){if(y.isFunction(i))return i.call(this,t,e);if(r&&(t=e),!!y.isString(t)){if(y.isString(i))return t.indexOf(i)!==-1;if(y.isRegExp(i))return i.test(t)}}function xr(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function yr(n,t){const e=y.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(r,s,o){return this[i].call(this,t,r,s,o)},configurable:!0})})}class Vt{constructor(t){t&&this.set(t)}set(t,e,i){const r=this;function s(l,c,a){const h=_t(c);if(!h)throw new Error("header name must be a non-empty string");const u=y.findKey(r,h);(!u||r[u]===void 0||a===!0||a===void 0&&r[u]!==!1)&&(r[u||c]=Dt(l))}const o=(l,c)=>y.forEach(l,(a,h)=>s(a,h,c));return y.isPlainObject(t)||t instanceof this.constructor?o(t,e):y.isString(t)&&(t=t.trim())&&!mr(t)?o(pr(t),e):t!=null&&s(e,t,i),this}get(t,e){if(t=_t(t),t){const i=y.findKey(this,t);if(i){const r=this[i];if(!e)return r;if(e===!0)return gr(r);if(y.isFunction(e))return e.call(this,r,i);if(y.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=_t(t),t){const i=y.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||Yt(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let r=!1;function s(o){if(o=_t(o),o){const l=y.findKey(i,o);l&&(!e||Yt(i,i[l],l,e))&&(delete i[l],r=!0)}}return y.isArray(t)?t.forEach(s):s(t),r}clear(t){const e=Object.keys(this);let i=e.length,r=!1;for(;i--;){const s=e[i];(!t||Yt(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const e=this,i={};return y.forEach(this,(r,s)=>{const o=y.findKey(i,s);if(o){e[o]=Dt(r),delete e[s];return}const l=t?xr(s):String(s).trim();l!==s&&delete e[s],e[l]=Dt(r),i[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return y.forEach(this,(i,r)=>{i!=null&&i!==!1&&(e[r]=t&&y.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(r=>i.set(r)),i}static accessor(t){const i=(this[He]=this[He]={accessors:{}}).accessors,r=this.prototype;function s(o){const l=_t(o);i[l]||(yr(r,o),i[l]=!0)}return y.isArray(t)?t.forEach(s):s(t),this}}Vt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);y.reduceDescriptors(Vt.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});y.freezeMethods(Vt);const nt=Vt;function Jt(n,t){const e=this||Se,i=t||e,r=nt.from(i.headers);let s=i.data;return y.forEach(n,function(l){s=l.call(e,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function Sn(n){return!!(n&&n.__CANCEL__)}function Pt(n,t,e){B.call(this,n??"canceled",B.ERR_CANCELED,t,e),this.name="CanceledError"}y.inherits(Pt,B,{__CANCEL__:!0});function wr(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new B("Request failed with status code "+e.status,[B.ERR_BAD_REQUEST,B.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const br=J.isStandardBrowserEnv?function(){return{write:function(e,i,r,s,o,l){const c=[];c.push(e+"="+encodeURIComponent(i)),y.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),y.isString(s)&&c.push("path="+s),y.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){const i=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function _r(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Mr(n,t){return t?n.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):n}function vn(n,t){return n&&!_r(t)?Mr(n,t):t}const Sr=J.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let i;function r(s){let o=s;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return i=r(window.location.href),function(o){const l=y.isString(o)?r(o):o;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}();function vr(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function Ar(n,t){n=n||10;const e=new Array(n),i=new Array(n);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const a=Date.now(),h=i[s];o||(o=a),e[r]=c,i[r]=a;let u=s,d=0;for(;u!==r;)d+=e[u++],u=u%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),a-o<t)return;const f=h&&a-h;return f?Math.round(d*1e3/f):void 0}}function Ue(n,t){let e=0;const i=Ar(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,l=s-e,c=i(l),a=s<=o;e=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&a?(o-s)/c:void 0,event:r};h[t?"download":"upload"]=!0,n(h)}}const Cr=typeof XMLHttpRequest<"u",Er=Cr&&function(n){return new Promise(function(e,i){let r=n.data;const s=nt.from(n.headers).normalize(),o=n.responseType;let l;function c(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}y.isFormData(r)&&(J.isStandardBrowserEnv||J.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let a=new XMLHttpRequest;if(n.auth){const f=n.auth.username||"",p=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(f+":"+p))}const h=vn(n.baseURL,n.url);a.open(n.method.toUpperCase(),bn(h,n.params,n.paramsSerializer),!0),a.timeout=n.timeout;function u(){if(!a)return;const f=nt.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:f,config:n,request:a};wr(function(m){e(m),c()},function(m){i(m),c()},g),a=null}if("onloadend"in a?a.onloadend=u:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(u)},a.onabort=function(){a&&(i(new B("Request aborted",B.ECONNABORTED,n,a)),a=null)},a.onerror=function(){i(new B("Network Error",B.ERR_NETWORK,n,a)),a=null},a.ontimeout=function(){let p=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const g=n.transitional||_n;n.timeoutErrorMessage&&(p=n.timeoutErrorMessage),i(new B(p,g.clarifyTimeoutError?B.ETIMEDOUT:B.ECONNABORTED,n,a)),a=null},J.isStandardBrowserEnv){const f=(n.withCredentials||Sr(h))&&n.xsrfCookieName&&br.read(n.xsrfCookieName);f&&s.set(n.xsrfHeaderName,f)}r===void 0&&s.setContentType(null),"setRequestHeader"in a&&y.forEach(s.toJSON(),function(p,g){a.setRequestHeader(g,p)}),y.isUndefined(n.withCredentials)||(a.withCredentials=!!n.withCredentials),o&&o!=="json"&&(a.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&a.addEventListener("progress",Ue(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",Ue(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=f=>{a&&(i(!f||f.type?new Pt(null,n,a):f),a.abort(),a=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const d=vr(h);if(d&&J.protocols.indexOf(d)===-1){i(new B("Unsupported protocol "+d+":",B.ERR_BAD_REQUEST,n));return}a.send(r||null)})},Nt={http:Zi,xhr:Er};y.forEach(Nt,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const An={getAdapter:n=>{n=y.isArray(n)?n:[n];const{length:t}=n;let e,i;for(let r=0;r<t&&(e=n[r],!(i=y.isString(e)?Nt[e.toLowerCase()]:e));r++);if(!i)throw i===!1?new B(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(y.hasOwnProp(Nt,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!y.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:Nt};function Kt(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Pt(null,n)}function Ve(n){return Kt(n),n.headers=nt.from(n.headers),n.data=Jt.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),An.getAdapter(n.adapter||Se.adapter)(n).then(function(i){return Kt(n),i.data=Jt.call(n,n.transformResponse,i),i.headers=nt.from(i.headers),i},function(i){return Sn(i)||(Kt(n),i&&i.response&&(i.response.data=Jt.call(n,n.transformResponse,i.response),i.response.headers=nt.from(i.response.headers))),Promise.reject(i)})}const We=n=>n instanceof nt?n.toJSON():n;function yt(n,t){t=t||{};const e={};function i(a,h,u){return y.isPlainObject(a)&&y.isPlainObject(h)?y.merge.call({caseless:u},a,h):y.isPlainObject(h)?y.merge({},h):y.isArray(h)?h.slice():h}function r(a,h,u){if(y.isUndefined(h)){if(!y.isUndefined(a))return i(void 0,a,u)}else return i(a,h,u)}function s(a,h){if(!y.isUndefined(h))return i(void 0,h)}function o(a,h){if(y.isUndefined(h)){if(!y.isUndefined(a))return i(void 0,a)}else return i(void 0,h)}function l(a,h,u){if(u in t)return i(a,h);if(u in n)return i(void 0,a)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(a,h)=>r(We(a),We(h),!0)};return y.forEach(Object.keys(Object.assign({},n,t)),function(h){const u=c[h]||r,d=u(n[h],t[h],h);y.isUndefined(d)&&u!==l||(e[h]=d)}),e}const Cn="1.5.0",ve={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{ve[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const Xe={};ve.transitional=function(t,e,i){function r(s,o){return"[Axios v"+Cn+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,l)=>{if(t===!1)throw new B(r(o," has been removed"+(e?" in "+e:"")),B.ERR_DEPRECATED);return e&&!Xe[o]&&(Xe[o]=!0,console.warn(r(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,o,l):!0}};function Rr(n,t,e){if(typeof n!="object")throw new B("options must be an object",B.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],o=t[s];if(o){const l=n[s],c=l===void 0||o(l,s,n);if(c!==!0)throw new B("option "+s+" must be "+c,B.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new B("Unknown option "+s,B.ERR_BAD_OPTION)}}const oe={assertOptions:Rr,validators:ve},st=oe.validators;class Ft{constructor(t){this.defaults=t,this.interceptors={request:new Ge,response:new Ge}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=yt(this.defaults,e);const{transitional:i,paramsSerializer:r,headers:s}=e;i!==void 0&&oe.assertOptions(i,{silentJSONParsing:st.transitional(st.boolean),forcedJSONParsing:st.transitional(st.boolean),clarifyTimeoutError:st.transitional(st.boolean)},!1),r!=null&&(y.isFunction(r)?e.paramsSerializer={serialize:r}:oe.assertOptions(r,{encode:st.function,serialize:st.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=s&&y.merge(s.common,s[e.method]);s&&y.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),e.headers=nt.concat(o,s);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(e)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const a=[];this.interceptors.response.forEach(function(g){a.push(g.fulfilled,g.rejected)});let h,u=0,d;if(!c){const p=[Ve.bind(this),void 0];for(p.unshift.apply(p,l),p.push.apply(p,a),d=p.length,h=Promise.resolve(e);u<d;)h=h.then(p[u++],p[u++]);return h}d=l.length;let f=e;for(u=0;u<d;){const p=l[u++],g=l[u++];try{f=p(f)}catch(b){g.call(this,b);break}}try{h=Ve.call(this,f)}catch(p){return Promise.reject(p)}for(u=0,d=a.length;u<d;)h=h.then(a[u++],a[u++]);return h}getUri(t){t=yt(this.defaults,t);const e=vn(t.baseURL,t.url);return bn(e,t.params,t.paramsSerializer)}}y.forEach(["delete","get","head","options"],function(t){Ft.prototype[t]=function(e,i){return this.request(yt(i||{},{method:t,url:e,data:(i||{}).data}))}});y.forEach(["post","put","patch"],function(t){function e(i){return function(s,o,l){return this.request(yt(l||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ft.prototype[t]=e(),Ft.prototype[t+"Form"]=e(!0)});const qt=Ft;class Ae{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(s){e=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(l=>{i.subscribe(l),s=l}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},t(function(s,o,l){i.reason||(i.reason=new Pt(s,o,l),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new Ae(function(r){t=r}),cancel:t}}}const Lr=Ae;function Pr(n){return function(e){return n.apply(null,e)}}function Br(n){return y.isObject(n)&&n.isAxiosError===!0}const le={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(le).forEach(([n,t])=>{le[t]=n});const kr=le;function En(n){const t=new qt(n),e=an(qt.prototype.request,t);return y.extend(e,qt.prototype,t,{allOwnKeys:!0}),y.extend(e,t,null,{allOwnKeys:!0}),e.create=function(r){return En(yt(n,r))},e}const I=En(Se);I.Axios=qt;I.CanceledError=Pt;I.CancelToken=Lr;I.isCancel=Sn;I.VERSION=Cn;I.toFormData=Ut;I.AxiosError=B;I.Cancel=I.CanceledError;I.all=function(t){return Promise.all(t)};I.spread=Pr;I.isAxiosError=Br;I.mergeConfig=yt;I.AxiosHeaders=nt;I.formToJSON=n=>Mn(y.isHTMLForm(n)?new FormData(n):n);I.getAdapter=An.getAdapter;I.HttpStatusCode=kr;I.default=I;const Rn=I;function X(n){return Rn.get(n)}function $(n){let t=[];return n.forEach(e=>{t.push(e.geometry.coordinates)}),t}function Ce(n){let t=n,e=[];for(let i=0;i<t.length;i++){let r;for(let s=0;s<t[i].length;s++)r=t[i][s];e.push(r)}return e}class Ln extends HTMLElement{constructor(e,i,r,s="地点"){super();R(this,"data");R(this,"labels");R(this,"name");R(this,"axisX");this.innerHTML=`
        <div class="chart-container" style="position: relative; height:400px; width:500px">
            <canvas id="myChart"></canvas>
        </div>
        `,this.data=e,this.labels=i,this.name=r,this.axisX=s}connectedCallback(){let e=this.data,i=this.labels,r=this.name,s=this.axisX,o=this.querySelector("#myChart");new Chart(o,{type:"line",data:{labels:i,datasets:[{label:"游客人数",data:e}]},options:{responsive:!0,plugins:{title:{display:!0,text:r+"-人流量",font:{size:20}}},scales:{x:{display:!0,title:{display:!0,text:s,font:{size:20,weight:"bold",lineHeight:1.2}}},y:{display:!0,title:{display:!0,text:"人数",font:{size:20,weight:"bold",lineHeight:1.2}}}}}})}}const it=11102230246251565e-32,F=134217729,Tr=(3+8*it)*it;function Qt(n,t,e,i,r){let s,o,l,c,a=t[0],h=i[0],u=0,d=0;h>a==h>-a?(s=a,a=t[++u]):(s=h,h=i[++d]);let f=0;if(u<n&&d<e)for(h>a==h>-a?(o=a+s,l=s-(o-a),a=t[++u]):(o=h+s,l=s-(o-h),h=i[++d]),s=o,l!==0&&(r[f++]=l);u<n&&d<e;)h>a==h>-a?(o=s+a,c=o-s,l=s-(o-c)+(a-c),a=t[++u]):(o=s+h,c=o-s,l=s-(o-c)+(h-c),h=i[++d]),s=o,l!==0&&(r[f++]=l);for(;u<n;)o=s+a,c=o-s,l=s-(o-c)+(a-c),a=t[++u],s=o,l!==0&&(r[f++]=l);for(;d<e;)o=s+h,c=o-s,l=s-(o-c)+(h-c),h=i[++d],s=o,l!==0&&(r[f++]=l);return(s!==0||f===0)&&(r[f++]=s),f}function Or(n,t){let e=t[0];for(let i=1;i<n;i++)e+=t[i];return e}function Bt(n){return new Float64Array(n)}const Ir=(3+16*it)*it,Dr=(2+12*it)*it,Nr=(9+64*it)*it*it,gt=Bt(4),$e=Bt(8),Ye=Bt(12),Je=Bt(16),j=Bt(4);function qr(n,t,e,i,r,s,o){let l,c,a,h,u,d,f,p,g,b,m,x,w,_,v,M,L,P;const S=n-r,C=e-r,A=t-s,E=i-s;_=S*E,d=F*S,f=d-(d-S),p=S-f,d=F*E,g=d-(d-E),b=E-g,v=p*b-(_-f*g-p*g-f*b),M=A*C,d=F*A,f=d-(d-A),p=A-f,d=F*C,g=d-(d-C),b=C-g,L=p*b-(M-f*g-p*g-f*b),m=v-L,u=v-m,gt[0]=v-(m+u)+(u-L),x=_+m,u=x-_,w=_-(x-u)+(m-u),m=w-M,u=w-m,gt[1]=w-(m+u)+(u-M),P=x+m,u=P-x,gt[2]=x-(P-u)+(m-u),gt[3]=P;let O=Or(4,gt),q=Dr*o;if(O>=q||-O>=q||(u=n-S,l=n-(S+u)+(u-r),u=e-C,a=e-(C+u)+(u-r),u=t-A,c=t-(A+u)+(u-s),u=i-E,h=i-(E+u)+(u-s),l===0&&c===0&&a===0&&h===0)||(q=Nr*o+Tr*Math.abs(O),O+=S*h+E*l-(A*a+C*c),O>=q||-O>=q))return O;_=l*E,d=F*l,f=d-(d-l),p=l-f,d=F*E,g=d-(d-E),b=E-g,v=p*b-(_-f*g-p*g-f*b),M=c*C,d=F*c,f=d-(d-c),p=c-f,d=F*C,g=d-(d-C),b=C-g,L=p*b-(M-f*g-p*g-f*b),m=v-L,u=v-m,j[0]=v-(m+u)+(u-L),x=_+m,u=x-_,w=_-(x-u)+(m-u),m=w-M,u=w-m,j[1]=w-(m+u)+(u-M),P=x+m,u=P-x,j[2]=x-(P-u)+(m-u),j[3]=P;const Y=Qt(4,gt,4,j,$e);_=S*h,d=F*S,f=d-(d-S),p=S-f,d=F*h,g=d-(d-h),b=h-g,v=p*b-(_-f*g-p*g-f*b),M=A*a,d=F*A,f=d-(d-A),p=A-f,d=F*a,g=d-(d-a),b=a-g,L=p*b-(M-f*g-p*g-f*b),m=v-L,u=v-m,j[0]=v-(m+u)+(u-L),x=_+m,u=x-_,w=_-(x-u)+(m-u),m=w-M,u=w-m,j[1]=w-(m+u)+(u-M),P=x+m,u=P-x,j[2]=x-(P-u)+(m-u),j[3]=P;const T=Qt(Y,$e,4,j,Ye);_=l*h,d=F*l,f=d-(d-l),p=l-f,d=F*h,g=d-(d-h),b=h-g,v=p*b-(_-f*g-p*g-f*b),M=c*a,d=F*c,f=d-(d-c),p=c-f,d=F*a,g=d-(d-a),b=a-g,L=p*b-(M-f*g-p*g-f*b),m=v-L,u=v-m,j[0]=v-(m+u)+(u-L),x=_+m,u=x-_,w=_-(x-u)+(m-u),m=w-M,u=w-m,j[1]=w-(m+u)+(u-M),P=x+m,u=P-x,j[2]=x-(P-u)+(m-u),j[3]=P;const N=Qt(T,Ye,4,j,Je);return Je[N-1]}function kt(n,t,e,i,r,s){const o=(t-s)*(e-r),l=(n-r)*(i-s),c=o-l,a=Math.abs(o+l);return Math.abs(c)>=Ir*a?c:-qr(n,t,e,i,r,s,a)}function Ke(n,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const e=Math.pow(10,t||0);return Math.round(n*e)/e}function Fr(n){return Math.abs(n)<=180?n:n-Pn(n)*360}function Pn(n){return n<0?-1:n>0?1:0}function Bn(n,t,e){n=Array.isArray(n)?n:n.toXY(),t=Array.isArray(t)?t:t.toXY(),e=Array.isArray(e)?e:e.toXY();let i=n[0],r=n[1],s=t[0],o=t[1],l=e[0],c=e[1],a=(s-i)*(c-r)-(o-r)*(l-i);return a=Pn(a),a}function Qe(n,t){let e=Array.isArray(n)?n:n.toXY(),i=Array.isArray(t)?t:t.toXY(),r=Math.atan2(i[1]-e[1],i[0]-e[0]);return r=r*180/Math.PI,r<0&&(r+=360),r}function Ee(n,t){let e=[];for(let i=0;i<n.length;i++){let r=n[i];Array.isArray(r)?e.push(Ee(r,t)):e.push(t[r])}return e}function zr(n,t){if(t>n)throw new Error("num must be less than length!");let e=[];for(;e.length<t;){let i=Math.floor(Math.random()*n);e.includes(i)||e.push(i)}return e}const kn={a:6378137,b:63710088e-1,Name:"Normal Sphere ( r= 6371008.8 )"},z=kn.a,jr={centimeters:z*100,centimetres:z*100,degrees:360/(2*Math.PI),feet:z*3.28084,inches:z*39.37,kilometers:z/1e3,kilometres:z/1e3,meters:z,metres:z,miles:z/1609.344,millimeters:z*1e3,millimetres:z*1e3,nauticalmiles:z/1852,radians:1,yards:z*1.0936},Gr={centimeters:1*100,centimetres:1*100,degrees:360/(2*Math.PI)*1/z,feet:1*3.28084,inches:1*39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1*1e3,millimetres:1*1e3,nauticalmiles:1/1852,radians:1/z,yards:1*1.0936},Hr={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Tn(n,t="kilometers"){const e=jr[t];if(!e)throw new Error(t+" units is invalid");return n*e}function At(n){return n%360*Math.PI/180}function Ze(n,t){const e=Gr[t];if(!e)throw new Error(t+" units is invalid");return n*e}function wt(n,t="meters",e=6){const i=20037508342789244e-9,r=z,s=Array.isArray(n)?n:n.to2DArray(),o=Fr(s[0]);let l=At(o),c=At(s[1]);return l=Tn(l,"meters"),c=r*Math.log(Math.tan(Math.PI*.25+.5*c)),l>i&&(l=i),l<-i&&(l=-i),c>i&&(c=i),c<-i&&(c=-i),l=Ke(Ze(l,t),e),c=Ke(Ze(c,t),e),[l,c]}function Ct(n){var t=180/Math.PI,e=6378137;return[n[0]*t/e,(Math.PI*.5-2*Math.atan(Math.exp(-n[1]/e)))*t]}function Re(n,t="meters",e=6){if(n[0]instanceof V){let i=[];for(let r=0;r<n.length;r++)i.push(wt(n[r],t,e));return i}else{let i=[];for(let r=0;r<n.length;r++)i.push(wt(n[r],t,e));return i}}function Ur(n){let t=n[0],e=n[1],i=n[2],r=n[3];return[[t,e],[t,r],[i,r],[i,e],[t,e]]}function On(n){let t=1/0,e=1/0,i=-1/0,r=-1/0;for(let s=0;s<n.length;s++){let o=n[s][0],l=n[s][1];t=Math.min(t,o),e=Math.min(e,l),i=Math.max(i,o),r=Math.max(r,l)}return[t,e,i,r]}class In{constructor(t,e,...i){R(this,"type");R(this,"properties");R(this,"MBR");R(this,"coordinates");this.type=t,this.properties=i,this.coordinates=e,this.MBR=this.calculateMBR()}getPropertyArray(){return this.properties}getMBR(){return this.MBR}}class V{constructor(t,e,i=0,...r){R(this,"lon");R(this,"lat");R(this,"asl");R(this,"type","Point");R(this,"properties");this.lon=t,this.lat=e,this.asl=i,this.properties=r}toXY(t="meters"){return wt(this,t)}toGeoJSON(){return{type:"Point",coordinates:[this.lon,this.lat],properties:{...this.properties}}}to2DArray(){return[this.lon,this.lat]}to3DArray(){return[this.lon,this.lat,this.asl]}toString(){return`Point(${this.lon}, ${this.lat}, ${this.asl})`}getPropertyArray(){return this.properties}static isPoint(t){return t.type==="Point"}}class ht extends In{constructor(t,...e){if(t[0]instanceof Array){let i=[];for(let r=0;r<t.length;r++)i.push(new V(t[r][0],t[r][1]));t=i}super("MultiPoint",t,...e)}getCorrinatesPropertyArray(){let t=[];for(let e=0;e<this.coordinates.length;e++){let i=this.coordinates[e].getPropertyArray();t.push(i)}return t}toArray(){let t=[];for(let e=0;e<this.coordinates.length;e++){let i=this.coordinates[e].to2DArray();t.push(i)}return t}toXYArray(){let t=[];for(let e=0;e<this.coordinates.length;e++){let i=this.coordinates[e].toXY();t.push(i)}return t}toGeoJSON(){return{type:"MultiPoint",coordinates:this.toArray(),properties:{...this.properties}}}calculateMBR(){let t=1/0,e=1/0,i=-1/0,r=-1/0;for(let s=0;s<this.coordinates.length;s++){let o=this.coordinates[s].to2DArray();t=Math.min(t,o[0]),e=Math.min(e,o[1]),i=Math.max(i,o[0]),r=Math.max(r,o[1])}return[t,e,i,r]}calculateCentroid(t){if(t){let e=0;for(let l=0;l<t.length;l++)e+=t[l];for(let l=0;l<t.length;l++)t[l]/=e;let i=0,r=0;for(let l=0;l<this.coordinates.length;l++){let c=this.coordinates[l].to2DArray();i+=c[0]*t[l],r+=c[1]*t[l]}let s=i,o=r;return new V(s,o)}else{let e=0,i=0;for(let o=0;o<this.coordinates.length;o++){let l=this.coordinates[o].to2DArray();e+=l[0],i+=l[1]}let r=e/this.coordinates.length,s=i/this.coordinates.length;return new V(r,s)}}deletePoint(t){this.coordinates.splice(t,1),this.MBR=this.calculateMBR()}addPoint(t){let e=V.isPoint(t)?t:new V(t[0],t[1]);this.coordinates.push(e),this.MBR=this.calculateMBR()}static isMultiPoint(t){return t.type==="MultiPoint"}}class Le extends ht{constructor(t,...e){super(t,...e),super.type="LineString"}static isLineString(t){return t.type==="LineString"}}class Vr extends In{constructor(t,...e){super("MultiLineString",t,...e)}calculateMBR(){let t=1/0,e=1/0,i=-1/0,r=-1/0;for(let s=0;s<this.coordinates.length;s++){let o=this.coordinates[s].getMBR();t=Math.min(t,o[0]),e=Math.min(e,o[1]),i=Math.max(i,o[2]),r=Math.max(r,o[3])}return[t,e,i,r]}toArray(){let t=[];for(let e=0;e<this.coordinates.length;e++){let i=this.coordinates[e].toArray();t.push(i)}return t}toGeoJSON(){return{type:"MultiLineString",coordinates:this.toArray(),properties:{...this.properties}}}static isMultiLineString(t){return t.type==="MultiLineString"}}class Dn extends Vr{constructor(t,...e){super(t,...e),super.type="Polygon"}static isPolygon(t){return t.type==="Polygon"}}const Nn=["shop.png","shopg.png","shopy.png","shopr.png","greenStar.svg","bluePoint.svg","redPoint.svg","pinkPoint.svg","person.png"];function G(n,t=Nn){let e=t[n];return new BMapGL.Icon(e,new BMapGL.Size(11,11),{offset:new BMapGL.Size(5,5)})}function Zt(n,t=Nn){return t[n]}function rt(n,t,e){if(e){let i=V.isPoint(n)?new BMapGL.Point(n.lon,n.lat):new BMapGL.Point(n[0],n[1]),r=new BMapGL.Marker(i,{icon:e});return t.addOverlay(r),r}else{let i=V.isPoint(n)?new BMapGL.Point(n.lon,n.lat):new BMapGL.Point(n[0],n[1]),r=new BMapGL.Marker(i);return t.addOverlay(r),r}}function Wr(n,t,e){let i=V.isPoint(n)?new BMapGL.Point(n.lon,n.lat):new BMapGL.Point(n[0],n[1]),r=new BMapGL.Label(t,{position:i,offset:new BMapGL.Size(5,5)});return r.setStyle({borderRadius:"50px",borderColor:"#ccc",padding:"10px",fontSize:"16px",height:"30px",lineHeight:"30px",fontFamily:"微软雅黑"}),e.addOverlay(r),r}function Et(n){n.clearOverlays()}function ut(n,t,e){let i=ht.isMultiPoint(n)?n.coordinates:n,r=[];for(let s=0;s<i.length;s++){let o=i[s],l=rt(o,t,e);r.push(l)}return r}function ae(n,t,e={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5},i=!1){let r=Le.isLineString(n)?n.toArray():n,s=[];for(let l=0;l<r.length;l++)s.push(new BMapGL.Point(r[l][0],r[l][1]));i&&s.push(new BMapGL.Point(r[0][0],r[0][1]));let o=new BMapGL.Polyline(s,e);t.addOverlay(o)}function Pe(n,t,e={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5}){let i=Dn.isPolygon(n)?n.toArray():n,r=[];for(let o=0;o<i.length;o++){let l=[];for(let c=0;c<i[o].length;c++)l.push(new BMapGL.Point(i[o][c][0],i[o][c][1]));r.push(l)}let s=new BMapGL.Polygon(r,e);t.addOverlay(s)}function Xr(n,t,e={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5}){for(let i=0;i<n.length;i++){let r=[];for(let o=0;o<n[i].length;o++)r.push(new BMapGL.Point(n[i][o][0],n[i][o][1]));r.push(new BMapGL.Point(n[i][0][0],n[i][0][1]));let s=new BMapGL.Polyline(r,e);t.addOverlay(s)}}function $r(n,t,e={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5},i=!1){for(let[r,s]of n)ae(s,t,e,i)}function Be(n,t,e={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5}){let i=[];for(let s=0;s<n.length;s++)i.push(new BMapGL.Point(n[s][0],n[s][1]));let r=new BMapGL.Polygon(i,e);t.addOverlay(r)}function ce(n,t,e,i,r=G(0),s={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5},o={strokeColor:"yellow",strokeWeight:5,strokeOpacity:.5}){for(let l=0;l<n.length;l++)l===e[0]||l===e[e.length-1]||rt(n[l],i,r);for(let l=0;l<t.length;l++){let c=t[l],a=n[c[0]],h=n[c[1]];ae([a,h],i,s)}if(e.length>0){let l=Ee(e,n);ae(l,i,o,!1),rt(l[0],i,G(4)),rt(l[l.length-1],i,G(2))}}function Yr(n,t,e){var i=new BMapGL.Point(n[0],n[1]),r=new BMapGL.Point(n[2],n[3]),s=new BMapGL.Bounds(new BMapGL.Point(i.lng,r.lat),new BMapGL.Point(r.lng,i.lat)),o=new BMapGL.GroundOverlay(s,{type:"canvas",url:t(),opacity:.8});e.addOverlay(o)}function te(n,t){return n[0]*t[1]-t[0]*n[1]}function tn(n,t,e,i,r=wt,s=Ct,o=!1){r&&(n=r(n),t=r(t),e=r(e),i=r(i));let l=[t[0]-n[0],t[1]-n[1]],c=[i[0]-e[0],i[1]-e[1]],a=te(l,c);if(a===0)return console.log("两条线段平行或共线"),null;let h=te([e[0]-n[0],e[1]-n[1]],c)/a,u=te([e[0]-n[0],e[1]-n[1]],l)/a;return!o&&(h<0||h>1||u<0||u>1)?(console.log("交点不在两条线段上"),null):s?s([n[0]+l[0]*h,n[1]+l[1]*h]):[n[0]+l[0]*h,n[1]+l[1]*h]}function Jr(n,t){return Kr(n,Ur(t))}function Kr(n,t){let e=n[n.length-1],i,r,s,o=t;for(let l in n){i=n[l];let c=o;o=[],r=c[c.length-1];for(let a in c)s=c[a],ee(s,e,i)?(ee(r,e,i)||o.push(tn(r,s,e,i,wt,Ct,!0)),o.push(s)):ee(r,e,i)&&o.push(tn(r,s,e,i,wt,Ct,!0)),r=s;e=i}return o}function Qr(n,t){let e=!1;for(let i=0,r=t.length-1;i<t.length;r=i++)t[i][1]>n[1]!=t[r][1]>n[1]&&n[0]<(t[r][0]-t[i][0])*(n[1]-t[i][1])/(t[r][1]-t[i][1])+t[i][0]&&(e=!e);return e}function ee(n,t,e){return Bn(t,e,n)>0}const Zr=["#FF0000","#FF7F00","#FFFF00","#00FF00","#0000FF","#4B0082","#9400D3","#FF0000","#FF7F00","#FFFF00","#00FF00","#0000FF","#4B0082","#9400D3","#FF0000","#FF7F00"];function en(n,t,e=Color){let{max:i,min:r}=ke(t),s=Math.floor(ts(n,r,i)*(e.length-1));return e[s]}function ts(n,t,e){return(n-t)/(e-t)}function ke(n){let t=n[0],e=n[0];for(let i=0;i<n.length;i++)n[i]>t&&(t=n[i]),n[i]<e&&(e=n[i]);return{max:t,min:e}}function es(n=ns(),t=Zr,e=document.querySelector(".Legend")){let{max:i,min:r}=ke(n),s=(i-r)/t.length,o='<div style="display:flex;flex-direction:column">';for(let l=0;l<t.length;l++)o+=`<div style="display:flex;align-items:center">
            <div style="width:20px;height:20px;background-color:${t[l]}"></div>
            <div>${(r+l*s).toFixed(2)} ~ ${(r+(l+1)*s).toFixed(2)}</div>
        </div>`;o+="</div>",e.innerHTML=o}function ns(){let n=[];for(let t=0;t<100;t++)n.push(t);return n}function is(n,t,e=document.querySelector(".Legend")){let{max:i,min:r}=ke(n),s=(i-r)/t.length,o=[];for(let c=0;c<t.length;c++)o.push(r+c*s);let l='<div style="display:flex;flex-direction:column">';for(let c=0;c<t.length;c++)l+=`<div style="display:flex;align-items:center">
            <img src="${t[c]}" style="width:20px;height:20px;"></img>
            <div>${o[c].toFixed(1)} km </div>
        </div>`;l+="</div>",e.innerHTML=l}const nn=kn.a;function zt(n,t,e="kilometers"){Array.isArray(n)&&(n=[...n]),Array.isArray(t)&&(t=[...t]);const i=Array.isArray(n)?n:n.to2DArray(),r=Array.isArray(t)?t:t.to2DArray();i.map((h,u)=>{i[u]=At(h)}),r.map((h,u)=>{r[u]=At(h)});const s=r[1]-i[1],o=r[0]-i[0],l=i[1],c=r[1],a=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(l)*Math.cos(c)));return Tn(a,e)}function rs(n,t="kilometers"){let e=Le.isLineString(n)?n.toArray():n;if(e.length<3)return 0;V.isPoint(e[0])&&e.map((o,l)=>{e[l]=o.to2DArray()});let i=0,r=e.length,s=[];for(let o=0;o<r;o++){s.push([]);for(let l=0;l<2;l++)s[o].push(At(e[o][l]))}for(let o=0;o<r;o++){let l=(o+1)%r,c=(o+2)%r;i+=(s[o][0]-s[c][0])*Math.sin(s[l][1])}return i=i*nn*nn/2,i=i*Hr[t],Math.abs(i)}class qn extends HTMLElement{constructor(e){super();R(this,"btnObjList");this.btnObjList=e;const i=this.attachShadow({mode:"open"}),r=document.createElement("div");r.setAttribute("class","wrapper");const s=document.createElement("style");s.textContent=`
        .wrapper{
            width: 100%;
            height: 50%;
            border-radius: 10px;
            overflow: auto;
        }
        `,i.appendChild(s),this.btnObjList.forEach(o=>{const l=new Fn(o.name,o.action);r.appendChild(l)}),i.appendChild(r)}}class Fn extends HTMLElement{constructor(e,i){super();R(this,"name");R(this,"action");this.name=e,this.action=i;const r=this.attachShadow({mode:"open"}),s=document.createElement("div");s.setAttribute("class","wrapper");const o=document.createElement("div");o.setAttribute("class","name"),o.textContent=e;const l=document.createElement("style");l.textContent=`
        .wrapper{
            width: 99%;
            height: 60px;
            background-color: rgb(255, 255, 255, 0.5);
            border-radius: 10px;
            border: 1px solid black;
            overflow: auto;
        }
        .name{
            width: 100%;
            height: 100%;
            line-height: 60px;
            text-align: center;
            font-size: 20px;
        }
        .wrapper:hover{
            background-color: rgb(255, 255, 255, 0.8);
        }
        `,r.appendChild(l),s.appendChild(o),s.addEventListener("click",()=>{this.action()}),r.appendChild(s)}}function Wt(n,t=document.querySelector("#components")){t.innerHTML="";const e=new qn(n);t.appendChild(e)}const he=["RGBA(0,255,0,0.3)","RGBA(0,0,255,0.3)","RGBA(255,0,0,0.3)"];function ss(n){Wt([{name:"加载景点多边形",action:()=>os(n)},{name:"加载游客位置",action:()=>ls(n)},{name:"计算景点客流量并展示",action:()=>as(n)},{name:"清空地图",action:()=>n.clearOverlays()}])}function os(n){X("polygon.json").then(t=>{let e=$(t.data.features),i=Ce(e);i=i.slice(1,i.length),i.forEach(r=>{Be(r,n,Te(0,[0,1,2]))})})}function ls(n){X("polygon.json").then(t=>{let e=$(t.data.features),i=Ce(e);i=i.slice(1,i.length),i.forEach(r=>{Be(r,n,Te(0,[0,1,2]))})}),X("people1.json").then(t=>{let e=$(t.data.features),i=G(5);ut(e,n,i)})}function as(n){X("polygon.json").then(t=>{let e=$(t.data.features),i=Ce(e);X("people1.json").then(r=>{let s=$(r.data.features),o=G(5);ut(s,n,o);let l=i.slice(1,i.length),c=[],a=[];for(let h=0;h<l.length;h++){let u=[],d=0;for(let f=0;f<s.length;f++)Qr(s[f],l[h])&&(u.push(s[f]),d++);rs(l[h]),a.push(d),c.push(u)}c.forEach(h=>{ut(h,n,G(6))}),l.forEach((h,u)=>{Be(h,n,Te(a[u],a))}),es(a,he),cs(document.querySelector("#components"),a,["A","B","C","D","E"],"逐地点")})})}function Te(n,t){return{fillColor:en(n,t,he),strokeColor:en(n,t,he),strokeWeight:2,strokeOpacity:.5,fillOpacity:.3}}function cs(n=document.querySelector("#components"),t,e,i="逐地点"){const r=new Ln(t,e,i);n.appendChild(r)}function hs(n){if(n.length===2)return new V(n[0],n[1]);if(n.length===3)return new V(n[0],n[1],n[2]);if(n.length>4)return new V(n[0],n[1],n[2],...n.slice(3));throw new Error("Error: the length of array is not correct")}function ue(n){let t=[];for(let e=0;e<n.length;e++){if(n[e]==null)continue;let i=hs(n[e]);t.push(i)}return t}function zn(n){let t=ue(n);return new ht(t)}class jn extends HTMLElement{constructor(e,i,r,s,o,l){super();R(this,"color");R(this,"distance");R(this,"data",[1,2,3,4,5,6,5,4,3,2,1]);R(this,"labels",["1","2","3","4","5","6","7","8","9","10","11"]);R(this,"name","name");R(this,"axisX","axisX");this.color=e,this.distance=i,this.distance=Math.round(this.distance*100)/100,this.data=r,this.labels=s,this.name=o,this.axisX=l,this.innerHTML=`
    <div class="post">
      <div class="post-content">
        <div class="post-header" style="background-color: ${this.color};">
          <div class="distance">距您 ${this.distance} km </div>
        </div>
        <div class="post-body">
          <div class="post-body-title">${this.name}</div>
          <div class="post-body-content">
            <div class="chart-container" style="position: relative; height:400px; width:500px">
              <canvas id="myChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
    `;let c=this.querySelector("#myChart"),a=document.createElement("style");a.textContent=`
    .post { 
      width: 500px;
      height: 400px;
      margin: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      background-color: rgba(255, 255, 255, 0.8);
    }
    .post-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .post-header {
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 30px;
    }

    .post-body {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .post-body-title {
      height: 50px; 
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      font-weight: bold;
    }

    .post-body-content {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .distance {
      font-size: 30px;
      font-weight: bold;
    }
    `,this.appendChild(a),us(c,this.data,this.labels,this.name,this.axisX)}}function us(n,t,e,i,r){const s=n.getContext("2d");new Chart(s,{type:"line",data:{labels:e,datasets:[{label:"游客人数",data:t}]},options:{responsive:!0,plugins:{title:{display:!0,text:i+"-人流量",font:{size:20}}},scales:{x:{display:!0,title:{display:!0,text:r,font:{size:10,weight:"bold",lineHeight:1.2}}},y:{display:!0,title:{display:!0,text:"人数",font:{size:10,weight:"bold",lineHeight:1.2}}}}}})}const rn=Math.pow(2,-52),Tt=new Uint32Array(512);class dt{static from(t,e=Gn,i=Hn){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const l=t[o];s[2*o]=e(l),s[2*o+1]=i(l)}return new dt(s)}constructor(t){const e=t.length>>1;if(e>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*e-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=t.length>>1;let l=1/0,c=1/0,a=-1/0,h=-1/0;for(let S=0;S<o;S++){const C=t[2*S],A=t[2*S+1];C<l&&(l=C),A<c&&(c=A),C>a&&(a=C),A>h&&(h=A),this._ids[S]=S}const u=(l+a)/2,d=(c+h)/2;let f,p,g;for(let S=0,C=1/0;S<o;S++){const A=ne(u,d,t[2*S],t[2*S+1]);A<C&&(f=S,C=A)}const b=t[2*f],m=t[2*f+1];for(let S=0,C=1/0;S<o;S++){if(S===f)continue;const A=ne(b,m,t[2*S],t[2*S+1]);A<C&&A>0&&(p=S,C=A)}let x=t[2*p],w=t[2*p+1],_=1/0;for(let S=0;S<o;S++){if(S===f||S===p)continue;const C=ps(b,m,x,w,t[2*S],t[2*S+1]);C<_&&(g=S,_=C)}let v=t[2*g],M=t[2*g+1];if(_===1/0){for(let A=0;A<o;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];xt(this._ids,this._dists,0,o-1);const S=new Uint32Array(o);let C=0;for(let A=0,E=-1/0;A<o;A++){const O=this._ids[A],q=this._dists[O];q>E&&(S[C++]=O,E=q)}this.hull=S.subarray(0,C),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(kt(b,m,x,w,v,M)<0){const S=p,C=x,A=w;p=g,x=v,w=M,g=S,v=C,M=A}const L=this.circumcenter(b,m,x,w,v,M);this._cx=L.x,this._cy=L.y;for(let S=0;S<o;S++)this._dists[S]=ne(t[2*S],t[2*S+1],L.x,L.y);xt(this._ids,this._dists,0,o-1),this._hullStart=f;let P=3;i[f]=e[g]=p,i[p]=e[f]=g,i[g]=e[p]=f,r[f]=0,r[p]=1,r[g]=2,s.fill(-1),s[this._hashKey(b,m)]=f,s[this._hashKey(x,w)]=p,s[this._hashKey(v,M)]=g,this.trianglesLen=0,this._addTriangle(f,p,g,-1,-1,-1);for(let S=0,C,A;S<this._ids.length;S++){const E=this._ids[S],O=t[2*E],q=t[2*E+1];if(S>0&&Math.abs(O-C)<=rn&&Math.abs(q-A)<=rn||(C=O,A=q,E===f||E===p||E===g))continue;let Y=0;for(let Xt=0,fi=this._hashKey(O,q);Xt<this._hashSize&&(Y=s[(fi+Xt)%this._hashSize],!(Y!==-1&&Y!==i[Y]));Xt++);Y=e[Y];let T=Y,N;for(;N=i[T],kt(O,q,t[2*T],t[2*T+1],t[2*N],t[2*N+1])>=0;)if(T=N,T===Y){T=-1;break}if(T===-1)continue;let ot=this._addTriangle(T,E,i[T],-1,-1,r[T]);r[E]=this._legalize(ot+2),r[T]=ot,P++;let K=i[T];for(;N=i[K],kt(O,q,t[2*K],t[2*K+1],t[2*N],t[2*N+1])<0;)ot=this._addTriangle(K,E,N,r[E],-1,r[K]),r[E]=this._legalize(ot+2),i[K]=K,P--,K=N;if(T===Y)for(;N=e[T],kt(O,q,t[2*N],t[2*N+1],t[2*T],t[2*T+1])<0;)ot=this._addTriangle(N,E,T,-1,r[T],r[N]),this._legalize(ot+2),r[N]=ot,i[T]=T,P--,T=N;this._hullStart=e[E]=T,i[T]=e[K]=E,i[E]=K,s[this._hashKey(O,q)]=E,s[this._hashKey(t[2*T],t[2*T+1])]=T}this.hull=new Uint32Array(P);for(let S=0,C=this._hullStart;S<P;S++)this.hull[S]=C,C=i[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(ds(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const l=i[t],c=t-t%3;if(o=c+(t+2)%3,l===-1){if(s===0)break;t=Tt[--s];continue}const a=l-l%3,h=c+(t+1)%3,u=a+(l+2)%3,d=e[o],f=e[t],p=e[h],g=e[u];if(fs(r[2*d],r[2*d+1],r[2*f],r[2*f+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1])){e[t]=g,e[l]=d;const m=i[u];if(m===-1){let w=this._hullStart;do{if(this._hullTri[w]===u){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,m),this._link(l,i[o]),this._link(o,u);const x=a+(l+1)%3;s<Tt.length&&(Tt[s++]=x)}else{if(s===0)break;t=Tt[--s]}}return o}_link(t,e){this._halfedges[t]=e,e!==-1&&(this._halfedges[e]=t)}_addTriangle(t,e,i,r,s,o){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=e,this._triangles[l+2]=i,this._link(l,r),this._link(l+1,s),this._link(l+2,o),this.trianglesLen+=3,l}getTriangles(){return this.triangles}getHalfedges(){return this.halfedges}getHull(){return this.hull}getPoints(){let t=[];for(let e=0;e<this.coords.length;e+=2)t.push([this.coords[e],this.coords[e+1]]);return t}getTriangleIndices(){let t=[];for(let e=0;e<this.triangles.length;e+=3)t.push([this.triangles[e],this.triangles[e+1],this.triangles[e+2]]);return t}circumcenter(t,e,i,r,s,o){const l=i-t,c=r-e,a=s-t,h=o-e,u=l*l+c*c,d=a*a+h*h,f=.5/(l*h-c*a),p=t+(h*u-c*d)*f,g=e+(l*d-a*u)*f;return{x:p,y:g}}}function ds(n,t){const e=n/(Math.abs(n)+Math.abs(t));return(t>0?3-e:1+e)/4}function ne(n,t,e,i){const r=n-e,s=t-i;return r*r+s*s}function fs(n,t,e,i,r,s,o,l){const c=n-o,a=t-l,h=e-o,u=i-l,d=r-o,f=s-l,p=c*c+a*a,g=h*h+u*u,b=d*d+f*f;return c*(u*b-g*f)-a*(h*b-g*d)+p*(h*f-u*d)<0}function ps(n,t,e,i,r,s){const o=e-n,l=i-t,c=r-n,a=s-t,h=o*o+l*l,u=c*c+a*a,d=.5/(o*a-l*c),f=(a*h-l*u)*d,p=(o*u-c*h)*d;return f*f+p*p}function xt(n,t,e,i){if(i-e<=20)for(let r=e+1;r<=i;r++){const s=n[r],o=t[s];let l=r-1;for(;l>=e&&t[n[l]]>o;)n[l+1]=n[l--];n[l+1]=s}else{const r=e+i>>1;let s=e+1,o=i;Mt(n,r,s),t[n[e]]>t[n[i]]&&Mt(n,e,i),t[n[s]]>t[n[i]]&&Mt(n,s,i),t[n[e]]>t[n[s]]&&Mt(n,e,s);const l=n[s],c=t[l];for(;;){do s++;while(t[n[s]]<c);do o--;while(t[n[o]]>c);if(o<s)break;Mt(n,s,o)}n[e+1]=n[o],n[o]=l,i-s+1>=o-e?(xt(n,t,s,i),xt(n,t,e,o-1)):(xt(n,t,e,o-1),xt(n,t,s,i))}}function Mt(n,t,e){const i=n[t];n[t]=n[e],n[e]=i}function Gn(n){return n[0]}function Hn(n){return n[1]}function gs(n){return[3*n,3*n+1,3*n+2]}function ms(n,t){return gs(t).map(e=>n.triangles[e])}function xs(n){return Math.floor(n/3)}function ys(n,t,e){const i=n[0]*n[0]+n[1]*n[1],r=t[0]*t[0]+t[1]*t[1],s=e[0]*e[0]+e[1]*e[1],o=2*(n[0]*(t[1]-e[1])+t[0]*(e[1]-n[1])+e[0]*(n[1]-t[1]));return[1/o*(i*(t[1]-e[1])+r*(e[1]-n[1])+s*(n[1]-t[1])),1/o*(i*(e[0]-t[0])+r*(n[0]-e[0])+s*(t[0]-n[0]))]}function Un(n,t,e,i=Ct){const r=ms(t,e).map(o=>n[o]);let s=ys(r[0],r[1],r[2]);return i&&(s=i(s)),s}function Vn(n){return n%3===2?n-2:n+1}function ws(n,t){const e=[];let i=t;do{e.push(i);const r=Vn(i);i=n.halfedges[r]}while(i!==-1&&i!==t);return e}function ie(n,t,e){const i=new Set;for(let r=0;r<t.triangles.length;r++){const s=t.triangles[Vn(r)];if(!i.has(s)){i.add(s);const c=ws(t,r).map(xs).map(a=>Un(n,t,a));e(s,c)}}}class Wn{constructor(t,e=Gn,i=Hn){R(this,"delaunay");R(this,"points");t instanceof dt?(this.delaunay=t,this.points=t.getPoints()):(this.points=t,this.delaunay=dt.from(t,e,i))}getVoronoi(){const{points:t,delaunay:e}=this,i=new Map;return ie(t,e,(r,s)=>i.set(r,s)),i}cutVoronoiByMBR(t){const{points:e,delaunay:i}=this,r=new Map;return ie(e,i,(s,o)=>{this.isInsideMBR(o,t)||(o=Jr(o,t)),r.set(s,o)}),r}robustVoronoi(t){const{points:e,delaunay:i}=this,r=new Map;return ie(e,i,(s,o)=>{this.isInsideMBR(o,t)&&r.set(s,o)}),r}isInsideMBR(t,e){const[i,r,s,o]=e;for(let l=0;l<t.length;l++){const[c,a]=t[l];if(c<i||c>s||a<r||a>o)return!1}return!0}}const Oe=[[-107.96481533627262,38.716851546431684],[-107.96481533627262,38.616574823524275],[-107.81006857689933,38.616574823524275],[-107.81006857689933,38.716851546431684],[-107.96481533627262,38.716851546431684]];function bs(n){Wt([{name:"加载数据",action:()=>_s(n)},{name:"计算狄罗妮三角网（及其中心点）",action:()=>Ms(n)},{name:"根据三角网追踪Voronoi图并裁剪",action:()=>Ss(n)},{name:"计算到当前点的距离并着色",action:()=>vs(n)},{name:"clear",action:()=>n.clearOverlays()}])}function _s(n){X("shop.json").then(t=>{let e=$(t.data.features),i=G(7);ut(e,n,i);let s=zn(e).calculateCentroid(),o=G(8);rt(s,n,o)})}function Ms(n){X("shop.json").then(t=>{let i=[...$(t.data.features),...Oe],r=Re(i),s=dt.from(r),o=Ee(s.getTriangleIndices(),i);for(let l=0;l<o.length;l++){let c=Un(r,s,l,Ct);rt(c,n,G(4))}Xr(o,n,{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5})})}function Ss(n){X("shop.json").then(t=>{let e=$(t.data.features),i=[...e,...Oe],r=Re(i),s=dt.from(r),l=new Wn(s).cutVoronoiByMBR(On(e));l=Xn(l),Pe(l.get(0),n,{fillColor:"yellow",fillOpacity:.5}),$r(l,n,{strokeColor:"green",strokeWeight:2,strokeOpacity:.5},!0)})}function vs(n){X("shop.json").then(t=>{let e=$(t.data.features);console.log(e);let i=[...e,...Oe],r=Re(i);console.log(r);let s=dt.from(r),l=new Wn(s).cutVoronoiByMBR(On(e));l=Xn(l);let a=zn(e).calculateCentroid(),h=G(8);rt(a,n,h);let u=G(0);ut(e,n,u);let d=Cs(a,e),f=["#14b814","#FFE171","#FF0000"];for(let p=0;p<e.length;p++){let g=As(p,d),b=rt(e[p],n,G(g)),m=[l.get(p)];Pe(m,n,{fillColor:f[g-1],fillOpacity:.15,strokeColor:f[g-1],strokeWeight:2,strokeOpacity:.6}),b.addEventListener("click",function(){const x=new jn(f[g-1],d[p],Es(11),["6:00","7:00","8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00"],`${p}-餐饮摊位`,"时间");let w=new BMapGL.InfoWindow(x,{width:540,height:430});n.openInfoWindow(w,b.getPosition())})}is(d,[Zt(1),Zt(2),Zt(3)])})}function As(n,t,e=[1,2,3]){let i=Math.max(...t),r=Math.min(...t),o=(t[n]-r)/(i-r),l=Math.floor(o*(e.length-1));return e[l]}function Cs(n,t){let e=[];for(let i=0;i<t.length;i++){let r=zt(n,t[i]);e.push(r)}return e}function Es(n){let t=[],i=.5+Math.random()*.1,r=.1;for(let s=0;s<n;s++){let o=s/n,l=Rs(o,i,r);t.push(l)}return t}function Rs(n,t,e){return 1/(e*Math.sqrt(2*Math.PI))*Math.exp(-(n-t)*(n-t)/(2*e*e))}function Xn(n){for(let[t,e]of n)e.length==0&&n.delete(t);return n}function Ls(n){let t=n.length,e=0,i=0;for(let r=0;r<t;r++)e+=n[r][0],i+=n[r][1];return[e/t,i/t]}function $n(n,t=1e-4,e=100,i){let r=[],s=i.length;if(s<n){console.log("样本数量小于分类数量");return}zr(s,n).forEach(h=>{r.push(i[h])});let l=1/0,c=0,a=[];for(;l>t&&c<e;){a=[];for(let u=0;u<n;u++)a.push([]);for(let u=0;u<s;u++){let d=1/0,f=0;for(let p=0;p<n;p++){let g=zt(i[u],r[p]);g<d&&(d=g,f=p)}a[f].push(i[u])}let h=[];for(let u=0;u<n;u++)h.push(Ls(a[u]));l=0;for(let u=0;u<n;u++){let d=zt(r[u],h[u]);d>l&&(l=d)}console.log(l),r=h,c++}return a}function Ps(n,t){var e=new mapvgl.HeatmapLayer({size:3e3,max:10,height:0,unit:"m",gradient:{.25:"rgba(255,254,202, 1)",.55:"rgba(255,199,118, 1)",.85:"rgba(250,141,62, 1)",1:"rgba(232,108,41, 1)"}});n.addLayer(e),e.setData(t)}class Yn extends HTMLElement{constructor(){super();const t="03d5359e3c530db19d7e014c23e0dd38",e="QINGDAO";this.innerHTML=`
        <div class="container">

            <div class="not-found">
                <img src="images/404.png">
                <p>Oops! Invalid location :/</p>
            </div>

            <div class="weather-box">
                <img src="">
                <p class="temperature"></p>
                <p class="description"></p>
            </div>

            <div class="weather-details">
                <div class="humidity">
                    <i class="fa-solid fa-water"></i>
                    <div class="text">
                        <span></span>
                        <p>Humidity</p>
                    </div>
                </div>
                <div class="wind">
                    <i class="fa-solid fa-wind"></i>
                    <div class="text">
                        <span></span>
                        <p>Wind Speed</p>
                    </div>
                </div>
            </div>

        </div>
        `,this.innerHTML+=`
        <style>
        .container{
            position: relative;
            width: 400px;
            height: 105px;
            background: #fff;
            padding: 28px 32px;
            overflow: hidden;
            border-radius: 18px;
            font-family: 'Roboto', sans-serif;
            transition: 0.6s ease-out;
        }

        .search-box{
            width: 100%;
            height: min-content;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .search-box input{
            color: #06283D;
            width: 80%;
            font-size: 24px;
            font-weight: 500;
            text-transform: uppercase;
            padding-left: 32px;
        }

        .search-box input::placeholder{
            font-size: 20px;
            font-weight: 500;
            color: #06283D;
            text-transform: capitalize;
        }

        .search-box button{
            cursor: pointer;
            width: 50px;
            height: 50px;
            color: #06283D;
            background: #dff6ff;
            border-radius: 50%;
            font-size: 22px;
            transition: 0.4s ease;
        }

        .search-box button:hover{
            color: #fff;
            background: #06283D;
        }

        .search-box i{
            position: absolute;
            color: #06283D;
            font-size: 28px;
        }

        .weather-box{
            text-align: center;
        }

        .weather-box img{
            width: 60%;
            margin-top: 30px;
        }

        .weather-box .temperature{
            position: relative;
            color: #06283D;
            font-size: 4rem;
            font-weight: 800;
            margin-top: 30px;
            margin-left: -16px;
        }

        .weather-box .temperature span{
            position: absolute;
            margin-left: 4px;
            font-size: 1.5rem;
        }

        .weather-box .description{
            color: #06283D;
            font-size: 22px;
            font-weight: 500;
            text-transform: capitalize;
        }

        .weather-details{
            width: 100%;
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .weather-details .humidity, .weather-details .wind{
            display: flex;
            align-items: center;
            width: 50%;
            height: 100px;
        }

        .weather-details .humidity{
            padding-left: 20px;
            justify-content: flex-start;
        }

        .weather-details .wind{
            padding-right: 20px;
            justify-content: flex-end;
        }

        .weather-details i{
            color: #06283D;
            font-size: 26px;
            margin-right: 10px;
            margin-top: 6px;
        }

        .weather-details span{
            color: #06283D;
            font-size: 22px;
            font-weight: 500;
        }

        .weather-details p{
            color: #06283D;
            font-size: 14px;
            font-weight: 500;
        }

        .not-found{
            width: 100%;
            text-align: center;
            margin-top: 50px;
            scale: 0;
            opacity: 0;
            display: none;
        }

        .not-found img{
            width: 70%;
        }

        .not-found p{
            color: #06283D;
            font-size: 22px;
            font-weight: 500;
            margin-top: 12px;
        }

        .weather-box, .weather-details{
            scale: 0;
            opacity: 0;
        }

        .fadeIn{
            animation: 0.5s fadeIn forwards;
            animation-delay: 0.5s;
        }

        @keyframes fadeIn{
            to {
                scale: 1;
                opacity: 1;
            }
        }
        </style>`,fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=metric&appid=${t}`).then(i=>i.json()).then(i=>{if(i.cod==="404"){document.querySelector(".container").style.height="400px",document.querySelector(".weather-box").style.display="none",document.querySelector(".weather-details").style.display="none",document.querySelector(".not-found").style.display="block",document.querySelector(".not-found").classList.add("fadeIn");return}switch(document.querySelector(".not-found").style.display="none",document.querySelector(".not-found").classList.remove("fadeIn"),i.weather[0].main){case"Clear":document.querySelector(".weather-box img").src="clear.png";break;case"Rain":document.querySelector(".weather-box img").src="rain.png";break;case"Snow":document.querySelector(".weather-box img").src="snow.png";break;case"Clouds":document.querySelector(".weather-box img").src="cloud.png";break;case"Haze":document.querySelector(".weather-box img").src="mist.png";break;default:document.querySelector(".weather-box img").src=""}document.querySelector(".weather-box .temperature").innerHTML=`${parseInt(i.main.temp)}<span>°C</span>`,document.querySelector(".weather-box .description").innerHTML=`${i.weather[0].description}`,document.querySelector(".weather-details .humidity span").innerHTML=`${i.main.humidity}%`,document.querySelector(".weather-details .wind span").innerHTML=`${parseInt(i.wind.speed)}Km/h`,document.querySelector(".weather-box").style.display="",document.querySelector(".weather-details").style.display="",document.querySelector(".weather-box").classList.add("fadeIn"),document.querySelector(".weather-details").classList.add("fadeIn"),document.querySelector(".container").style.height="590px"})}}function Bs(n){const t=n.map((s,o)=>[...s.toXY(),o]);let e=t[0];for(let s=1;s<t.length;s++)t[s][1]<e[1]&&(e=t[s]);t.sort((s,o)=>{let l=Qe([e[0],e[1]],[s[0],s[1]]),c=Qe([e[0],e[1]],[o[0],o[1]]);if(l<c)return-1;if(l>c)return 1;{let a=Math.pow(s[0]-e[0],2)+Math.pow(s[1]-e[1],2),h=Math.pow(o[0]-e[0],2)+Math.pow(o[1]-e[1],2);return a<h?-1:1}});let i=[];i.push(t[0]),i.push(t[1]);for(let s=2;s<t.length;s++){for(;i.length>1&&Bn([i[i.length-2][0],i[i.length-2][1]],[i[i.length-1][0],i[i.length-1][1]],[t[s][0],t[s][1]])<=0;)i.pop();i.push(t[s])}let r=[];for(let s=0;s<i.length;s++){let o=i[s][2];r.push(n[o])}return r}function ks(n,t){Wt([{name:"加载数据",action:()=>Ts(n)},{name:"k-means聚类",action:()=>Os(n,t)},{name:"热力图",action:()=>Is(n,t)},{name:"clear",action:()=>Ie(n,t)},{name:"天气",action:()=>Ds()}])}function Ie(n,t){Et(n),t.removeAllLayers()}function Ts(n,t){X("people1.json").then(e=>{let i=$(e.data.features);ut(i,n,G(6))})}function Os(n,t){Ie(n,t),X("people1.json").then(e=>{let i=$(e.data.features);ut(i,n,G(6));let s=new ht(i).toArray(),o=ue(s),l=$n(50,10,1e3,s);for(let c=0;c<l.length;c++){let a=new ht(l[c]),h=a.toArray();if(h.length>=3){o=ue(h);let d=Bs(o),f=new Le(d),p=new Dn([f]);Pe(p,n,{strokeColor:"#FD8A7D",strokeWeight:1,fillColor:"#FFF2C6",fillOpacity:.2})}let u=a.calculateCentroid();rt(u,n)}})}function Is(n,t){Ie(n,t);let e=[];X("people1.json").then(i=>{let r=$(i.data.features),o=new ht(r).toArray(),l=$n(30,10,1e3,o);Ns(l,e),Ps(t,e)})}function Ds(){qs(document.querySelector("#components"))}function Ns(n,t){for(let e=0;e<n.length;e++){let r=new ht(n[e]).calculateCentroid(),s=r.lat,o=r.lon;t.push({geometry:{type:"Point",coordinates:[o.toString(),s.toString()]},properties:{count:(n[e].length*.06).toString()}})}}function qs(n=document.querySelector("#components")){const t=new Yn;n.appendChild(t)}class Jn{constructor(t,e){R(this,"edges");R(this,"source");R(this,"dijkstra",t=>{const e=new Set,i={},r={},s={},o=(l,c)=>{let a=1/0,h=null;for(let u of l)c[u]<a&&(a=c[u],h=u);return h};for(let l=0;l<this.edges.length;l++){let c=this.edges[l][0],a=this.edges[l][1],h=this.edges[l][2];e.add(c),e.add(a),r[c]=1/0,r[a]=1/0,s[c]===void 0&&(s[c]={}),s[a]===void 0&&(s[a]={}),s[c][a]=h,s[a][c]=h}for(r[this.source]=0;e.size;){let l=o(e,r),c=Object.keys(s[l]).map(a=>parseInt(a)).filter(a=>e.has(a));if(e.delete(l),l===t)break;for(let a of c){let h=r[l]+s[l][a];h<r[a]&&(r[a]=h,i[a]=l)}}{let l=t,c=[l],a=0;for(;i[l]!==void 0;)c.unshift(i[l]),a+=s[l][i[l]],l=i[l];return[c,a]}});this.edges=t,this.source=e}}class Kn extends HTMLElement{constructor(e,i){super();R(this,"source");R(this,"target");this.innerHTML=`
        <div class="chart-container" style="position: relative; height:100px; width:500px">
            
        <div class="dijkstra_div">
        <p>Dijkstra算法:</p>
        <select id="paths_selectSource" style="width:100px">
            <option class="select-options"value="0">0</option>
            <option class="select-options"value="1">1</option>
            <option class="select-options" value="2">2</option>
            <option class="select-options" value="3">3</option>
            <option class="select-options" value="4">4</option>
            <option class="select-options" value="5">5</option>
            <option class="select-options" value="6">6</option>
            <option class="select-options" value="7">7</option>
            <option class="select-options" value="8">8</option>
        </select>
        <select id="paths_selectTarget" style="width:100px">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
        </select>
        <button id="dijkstra_button">单源最短路径</button>
        </div>
        <div class="floyd_div">
        <p>Floyd算法:</p>
        <select id="paths_selectVertices" style="width:100px">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
        </select>
        <button id="floyd_button">多源最短路径</button>
        </div>
        </div>
        `,this.source=e,this.target=i}addDistanceDiV(e,i,r){const s=document.querySelector(".distance");s&&s.parentNode.removeChild(s);const o=document.createElement("div");r=Math.round(r*100)/100,o.innerHTML=`
        <div class="distance">
            <div class="distance-star"> 起点： ${e} </div>
            <div class="distance-end"> 终点： ${i} </div>
            <div class="distance-distance">距离： ${r} km </div>
        </div>
        `;const l=document.createElement("style");l.textContent=`
        .distance{
            width: 100%;
            height: 30px;
            background-color: rgb(255, 255, 255, 0.5);
            display: flex;
            align-items: center;
            justify-content: space-around;
        }
        .distance-star{
            width: 100px;
            height: 100%;
            text-align: center;
            border: 1px solid black;
            border-radius: 10px;
        }
        .distance-end{
            width: 100px;
            height: 100%;
            text-align: center;
            border: 1px solid black;
            border-radius: 10px;
        }
        .distance-distance{
            width: 200px;
            height: 100%;
            text-align: center;
            border: 1px solid black;
            border-radius: 10px;
        }
        `,this.appendChild(l),this.appendChild(o)}}class Fs{constructor(t,e){R(this,"n");R(this,"edge");this.n=t,this.edge=e}floyd_warshall(){const t=Array.from({length:this.n},(o,l)=>l),e=1/0,i=Array.from({length:this.n},()=>Array(this.n).fill(e)),r=Array.from({length:this.n},()=>Array(this.n).fill(0));for(let o of t)i[o][o]=0;for(let[o,l,c]of this.edge)i[o][l]=c,r[o][l]=l;for(let o of t)for(let l of t)for(let c of t){const a=i[l][o]+i[o][c];i[l][c]>a&&(i[l][c]=a,r[l][c]=r[l][o])}const s={};for(let o of t){s[o]=[];for(let l of t)if(o!==l){const c=[o];let a=o;for(;a!==l;){const h=r[a][l];if(c.includes(h))break;c.push(h),a=h}a===l&&s[o].push(c)}}return Object.values(s)}}function zs(n){let t=Hs(document.querySelector("#components"));const e=[[-107.8557944859051,38.68187126977591],[-107.89863213828417,38.68346764721872],[-107.90412138519707,38.652962277391765],[-107.88355010300452,38.677532888179115],[-107.8771186222527,38.66469348725289],[-107.8938079077475,38.669333734486884],[-107.90821768107722,38.671240598219185],[-107.87760708914527,38.654903486216654],[-107.86596529487325,38.67664310297528]],i=[[0,1],[0,7],[0,8],[1,6],[2,5],[2,6],[2,7],[3,5],[3,8],[4,5],[4,7],[4,8]];var r=Gs(e,i,zt);js(e,r,i,n);let s=document.getElementById("dijkstra_button"),o=document.getElementById("floyd_button");console.log(o),s==null||s.addEventListener("click",function(){Et(n);for(let d=0;d<e.length;d++)console.log(e[d]),Wr(e[d],"顶点"+d,n);var l=St("#paths_selectSource"),c=St("#paths_selectTarget");console.log(l,c);let a=new Jn(r,l),[h,u]=a.dijkstra(c);t.addDistanceDiV(l,c,u),console.log(h),ce(e,i,h,n)}),o==null||o.addEventListener("click",function(){Et(n);let l=St("#paths_selectVertices"),a=new Fs(9,r).floyd_warshall();console.log(a[l]),a[l].splice(0,1);for(let h=0;h<a[l].length;h++)ce(e,i,a[l][h],n,G(0),{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5},{strokeColor:Us(),strokeWeight:5,strokeOpacity:.5})})}function js(n,t,e,i){var r=St("#paths_selectSource"),s=St("#paths_selectTarget");let o=new Jn(t,r),[l,c]=o.dijkstra(s);ce(n,e,l,i)}function Gs(n,t,e){let i=[];for(let r=0;r<t.length;r++){let s=t[r],o=n[s[0]],l=n[s[1]],c=e(o,l);i.push([s[0],s[1],c])}return i}function Hs(n=document.querySelector("#components")){const t=new Kn(0,1);return n.appendChild(t),t}function St(n){let t=document.querySelector(n);return t==null?void 0:t.value}function Us(){const n=["red","green","yellow","orange","pink","silver","white"];return n[Math.floor(Math.random()*n.length)]}var Vs=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)},ft=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},H=(n,t,e)=>(Vs(n,t,"access private method"),e);const Ws=[1,0];function sn(n,t){return Math.pow(n-t,2)}function lt(n,t){return Math.abs(n-t)}function Xs(n,t){return Math.sqrt(n*n+t*t)}function $s(n){return n*(Math.PI/180)}function Ys(n,t){let e=0;for(let i=0;i<n.length;i++)e+=n[i]*t[i];return e}function de(n,t){if(Ks(n,t))return-1;let e=Qn(n,t),i=Ys(e,Ws)/(Js(n,t)*1),r=Math.acos(i)*180/Math.PI;return e[1]<0&&(r=-r),(r+360)%360}function Qn(n,t){let e=[];for(let i=0;i<n.length;i++)e.push(t[i]-n[i]);return e}function Js(n,t){let e=Qn(n,t);return Xs(e[0],e[1])}function Ks(n,t){if(n.length!=t.length)return!1;{let e=!0;for(let i=0;i<n.length;i++)if(n[i]!==t[i]){e=!1;break}return e}}function Qs(n,t,e,i){let r=de(n,t),s=de(e,i);return lt(r,s)}function on(n,t){return n[0]*t[1]-n[1]*t[0]}function Rt(n,t){let e=n.length,i=n[0].length,r=0;for(let s=0;s<e;s++)for(let o=0;o<i;o++)r=r+n[s][o]*t[s][o];return r}function Zs(n){return Rt([[0,1,0],[1,-4,1],[0,1,0]],n)}function to(n){let t=[[0,0,0],[.16666666666666666,0,-.16666666666666666],[0,0,0]],e=[[0,-1/6,0],[0,0,0],[0,1/6,0]],i=Rt(t,n),r=Rt(e,n);return Math.sqrt(r*r+i*i)}function eo(n){let t=[[0,0,0],[.16666666666666666,0,-.16666666666666666],[0,0,0]],e=[[0,-1/6,0],[0,0,0],[0,1/6,0]],i=-Rt(t,n),r=-Rt(e,n),s=57.29578*Math.atan2(r,-i),o=0;return s<0?o=90-s:s>90?o=360-s+90:o=90-s,o}function Zn(n,t){let e=t.y-n.y,i=n.x-t.x,r=t.x*n.y-n.x*t.y;return[e,i,r]}function no(n,t,e,i){return n*i.x+t*i.y+e===0}function ti(n,t,e){let i=Zn(n,t),r=e.x,s=e.y,o=i[0],l=i[1],c=i[2],a=Math.abs(o*r+l*s+c),h=Math.sqrt(o*o+l*l);return a/h}class U{constructor(t,e){this.x=t,this.y=e}getBuffer(t){return new xe(this,t)}getVector_(t){return new lo(this,t)}getX(){return this.x}getY(){return this.y}getXY(){return[this.x,this.y]}getEuclideanDistance_(t){return Math.sqrt(sn(this.x,t.x)+sn(this.y,t.y))}getManhattanDistance_(t){return lt(this.x,t.x)+lt(this.y,t.y)}getChebyshevDistance_(t){return Math.max(lt(this.x,t.x),lt(this.y,t.y))}getMinkowskiDistance_(t,e){return Math.pow(Math.pow(lt(this.x,t.x),e)+Math.pow(lt(this.y,t.y),e),Math.pow(e,-1))}getAngle_(t){let e=this.getXY(),i=t.getXY();return de(e,i)}getDistance2Line_(t,e){return ti(t,e,this)}IsSamePoint_(t){return t.x===this.x&&t.y===this.y}getFootPoint_(t){let e=t.getMathFrom(),i=e[0],r=e[1],s=e[2],o=this.x,l=this.y,c=(r*r*o-i*r*l-i*s)/(i*i+r*r),a=(-i*r*o+i*i*l-r*s)/(i*i+r*r);return new U(c,a)}static fromString(t){let e=t.split(",");return new U(e[0],e[1])}}class ct{constructor(t,e){this.sp=t,this.ep=e,this.pointlist=[t,e],this.revertimes=0,this.extent=[t.x,t.y,e.x,e.y]}getSimpleLine(){return this.pointlist}getStartPoint(){return this.sp}getEndPoint(){return this.ep}getMathDistance2Point_(t){return ti(this.sp,this.ep,t)}getMathFrom(){return Zn(this.sp,this.ep)}IsPointOnLine_(t){let e=this.getMathFrom(),i=e[0],r=e[1],s=e[2];return no(i,r,s,t)}Reverse(){this.pointlist.reverse();let t=this.sp;this.sp=this.ep,this.ep=t,this.revertimes++}getReversedLine(){return new ct(this.ep,this.sp)}getAngle2Line_(t){return Qs(this.sp.getXY(),this.ep.getXY(),t.sp.getXY(),t.ep.getXY())}getLength(){return this.sp.getEuclideanDistance_(this.ep)}IsSameLine_(t){return!!(this.sp.IsSamePoint_(t.sp)&&this.ep.IsSamePoint_(t.ep)||this.sp.IsSamePoint_(t.ep)&&this.ep.IsSamePoint_(t.sp))}}class De{constructor(t){this.pointlist=t,this.sp=t[0],this.ep=t[t.length-1],this.getExtent()}extendLine(t){this.pointlist.push(t),this.ep=t,this.getExtent()}getLine(){return this.pointlist}getStartPoint(){return this.sp}getEndPoint(){return this.ep}getSubSetByDP(t){return ro(this.pointlist,t)}getTwoSubLineFromInx(t){return ei(this.pointlist,t)}getExtent(){this.extent=io(this.pointlist)}getBuffer(t){const e=(c,a,h)=>{let u=a.x-c.x,d=a.y-c.y,f=Math.sqrt(u*u+d*d),p=u/f,g=d/f,b=a.x+p*h,m=a.y+g*h;return new U(b,m)},i=(c,a,h,u,d)=>{a.x-c.x,a.y-c.y,u.x-h.x,u.y-h.y;let f=r(c,a),p=r(h,u),g={x:f.x+p.x,y:f.y+p.y},b=Math.sqrt(g.x*g.x+g.y*g.y),m=g.x/b,x=g.y/b,w=a.x+m*d,_=a.y+x*d;return new U(w,_)},r=(c,a)=>{let h=a.x-c.x,u=a.y-c.y,d=Math.sqrt(h*h+u*u),f=-u/d,p=h/d;return{x:f,y:p}};let s=[],o=this.pointlist,l=o.length;for(let c=0;c<l-2;c++){let a=o[c],h=o[c+1],u=o[c+2];if(c==0){let f=e(h,a,t*2);s.push(f);let p=r(a,h),g=new U(a.x+p.x*t,a.y+p.y*t);s.push(g)}let d=i(a,h,h,u,t);if(s.push(d),c==l-3){let f=r(h,u),p=new U(u.x+f.x*t,u.y+f.y*t);s.push(p)}}for(let c=l-1;c>1;c--){let a=o[c],h=o[c-1],u=o[c-2];if(c==l-1){let f=e(h,a,t*2);s.push(f);let p=r(a,h),g=new U(a.x+p.x*t,a.y+p.y*t);s.push(g)}let d=i(a,h,h,u,t);if(s.push(d),c==2){let f=r(h,u),p=new U(u.x+f.x*t,u.y+f.y*t);s.push(p)}}return new so(s)}}function io(n){let t=n.slice();t.sort((i,r)=>i.x-r.x);let e=n.slice();return e.sort((i,r)=>i.y-r.y),[t[0].x,e[0].y,t[t.length-1].x,e[e.length-1].y]}function ei(n,t){return{firstline:n.slice(0,t+1),secondline:n.slice(t,n.length+1)}}function fe(n,t,e){let i=n.slice(),r=i.shift(),s=i.pop();if(i.length===0)e.push(n);else{i.sort((c,a)=>c.getDistance2Line_(r,s)-a.getDistance2Line_(r,s));let o=i[i.length-1],l=n.indexOf(o);if(o.getDistance2Line_(r,s)<t)e.push([r,s]);else{let c=ei(n,l);fe(c.firstline,t,e),fe(c.secondline,t,e)}}}function ro(n,t){let e=[];fe(n,t,e);let i=[];for(let r of e)i.push(r[0]);return i.push(e[e.length-1][1]),i}var pe,ni,ge,ii;const ri=class extends De{constructor(n){super(n),ft(this,pe),ft(this,ge),this.Isanticlockwise=H(this,ge,ii).call(this),this.vectorlist=H(this,pe,ni).call(this)}get_VectorList(){return this.vectorlist}get_OrderedPointList(){let n=this.get_VectorList(),t=[];for(let e=0;e<n.length;e++){let i=n[e].sp;t.push(i)}return t}getBuffer(n){const t=(h,u,d,f,p,g=!1)=>{if(g){let P=h;h=f,f=P}u.x-h.x,u.y-h.y,f.x-d.x,f.y-d.y;let b=e(h,u),m=e(d,f),x={x:b.x+m.x,y:b.y+m.y},w=Math.sqrt(x.x*x.x+x.y*x.y),_=x.x/w,v=x.y/w,M=u.x+_*p,L=u.y+v*p;return new U(M,L)},e=(h,u)=>{let d=u.x-h.x,f=u.y-h.y,p=Math.sqrt(d*d+f*f),g=-f/p,b=d/p;return{x:g,y:b}};let i=[],r=this.pointlist,s=r.length;for(let h=0;h<s-2;h++){let u=r[h],d=r[h+1],f=r[h+2],p=t(u,d,d,f,n,!0);i.push(p)}let o=r[s-2],l=r[s-1],c=r[0];r[1];let a=t(o,l,l,c,n,!0);return i.push(a),o=r[s-1],l=r[0],c=r[1],r[2],a=t(o,l,l,c,n,!0),i.push(a),new ri(i)}};let so=ri;pe=new WeakSet,ni=function(){let n=[];for(let e=0;e<this.pointlist.length-1;e++){let i=new ct(this.pointlist[e],this.pointlist[e+1]);n.push(i)}let t=new ct(this.ep,this.sp);return n.push(t),n},ge=new WeakSet,ii=function(){let n=0;for(let t=0;t<this.pointlist.length-1;t++)return n+=on(this.pointlist[t].getXY(),this.pointlist[t+1].getXY()),n+=on(this.ep.getXY(),this.sp.getXY()),n>0};var me,si;class oo{constructor(t,e,i){ft(this,me),this.pa=t,this.pb=e,this.pc=i,this.a=new ct(e,i),this.b=new ct(i,t),this.c=new ct(t,e),this.area=H(this,me,si).call(this)}getEXCRadius(){let t=this.c.getAngle2Line_(this.b.getReversedLine()),e=Math.sin($s(t));return Math.abs(this.a.getLength()/(2*e))}getTriangle(){return[this.pa,this.pb,this.pc]}getEXCCenter(){let t=this.pa.x,e=this.pb.x,i=this.pc.x,r=this.pa.y,s=this.pb.y,o=this.pc.y,l=2*(e-t),c=2*(s-r),a=e*e+s*s-t*t-r*r,h=2*(i-e),u=2*(o-s),d=i*i+o*o-e*e-s*s,f=(a*u-d*c)/(l*u-h*c),p=(l*d-h*a)/(l*u-h*c);return new U(f,p)}getEXCircle(){return new xe(this.getEXCCenter(),this.getEXCRadius())}getINCcenter(){let t=this.pa.x,e=this.pa.y,i=this.pb.x,r=this.pb.y,s=this.pc.x,o=this.pc.y,l=this.a.getLength(),c=this.b.getLength(),a=this.c.getLength(),h=(l*t+c*i+a*s)/(l+c+a),u=(l*e+c*r+a*o)/(l+c+a);return new U(h,u)}getINCRadius(){let t=this.a.getLength(),e=this.b.getLength(),i=this.c.getLength();return 2*this.area/(t+e+i)}getINCcircle(){return new xe(this.getINCcenter,this.getINCRadius)}}me=new WeakSet,si=function(){let n=this.a.getLength(),t=this.b.getLength(),e=this.c.getLength(),i=(n+t+e)/2;return Math.sqrt(i*(i-n)*(i-t)*(i-e))};class xe{constructor(t,e){this.center=t,this.radius=e}IsPointOnCircle_(t,e){let i=this.center.getEuclideanDistance_(t);return Math.abs(i-this.radius)<=e}getCenter(){return this.center}getRadius(){return this.radius}static createCircle_from_Trangle(t,e,i){return new oo(t,e,i).getEXCircle()}}class lo{constructor(t,e){this.x=e[0]-t[0],this.y=e[1]-t[1],this.orip=t,this.endp=e}getModule(){return Math.sqrt(this.x*this.x+this.y*this.y)}getUnitVector(){let t=this.getModule();return[this.x/t,this.y/t]}getNormalVector(){return[-this.y,this.x]}getDotProduct(t){return this.x*t.x+this.y*t.y}getCrossProduct(t){return this.x*t.y-this.y*t.x}getAngleInRadian(t){let e=this.getDotProduct(t),i=this.getModule(),r=t.getModule();return Math.acos(e/(i*r))}getAngleInDegree(t){let e=this.getDotProduct(t),i=this.getModule(),r=t.getModule();return Math.acos(e/(i*r))*180/Math.PI}getDirection(){return Math.atan2(this.y,this.x)}getDirectionInDegree(){return Math.atan2(this.y,this.x)*180/Math.PI}getDirectionInRadian(){return Math.atan2(this.y,this.x)}get_1DVector(){return[this.x,this.y]}get_2DVector(){return[[0,0],[this.x,this.y]]}get_1DPointVector(){return[this.orip,this.endp]}get_2DPointVector(){return[[this.orip.x,this.orip.y],[this.endp.x,this.endp.y]]}}var Q,et,oi;const li=class{constructor(n,t,e=0){ft(this,Q),ft(this,oi),this.row=n,this.column=t,this.gridset=H(this,Q,et).call(this,e)}get1DArray(){let n=this.gridset,t=[];for(let e=0;e<this.row;e++)for(let i=0;i<this.column;i++)t.push(n[e][i]);return t}get2DArray(){return this.gridset}padding_(n,t){this.paddingsize=n;let e=this.row+2*n,i=this.column+2*n;for(let r of this.gridset)for(let s=0;s<n;s++)r.push(t),r.unshift(t);for(let r=0;r<n;r++){let s=[];s.length=i,s.fill(t),this.gridset.push(s),this.gridset.unshift(s)}this.row=e,this.column=i}depadding_(){let n=this.row-2*this.paddingsize,t=this.column-2*this.paddingsize;for(let e of this.gridset)for(let i=0;i<this.paddingsize;i++)e.pop(),e.shift();for(let e=0;e<this.paddingsize;e++)this.gridset.pop(),this.gridset.shift();this.row=n,this.column=t}default_convolve(){let n=this.gridset,t=this.row,e=this.column,i=this.paddingsize,r=[];for(let s=i;s<t-i;s++){let o=[];for(let l=i;l<e-i;l++){let c=[[n[s-1][l-1],n[s-1][l],n[s-1][l+1]],[n[s][l-1],n[s][l],n[s][l+1]],[n[s+1][l-1],n[s+1][l],n[s+1][l+1]]];o.push(Zs(c))}r.push(o)}return r}get_Slope(){let n=this.gridset,t=this.row,e=this.column,i=this.paddingsize,r=[];for(let s=i;s<t-i;s++){let o=[];for(let l=i;l<e-i;l++){let c=[[n[s-1][l-1],n[s-1][l],n[s-1][l+1]],[n[s][l-1],n[s][l],n[s][l+1]],[n[s+1][l-1],n[s+1][l],n[s+1][l+1]]];o.push(to(c))}r.push(o)}return r}reClassify_Binary_(n){for(let t=0;t<this.row;t++)for(let e=0;e<this.column;e++)this.gridset[t][e]>=n?this.gridset[t][e]=1:this.gridset[t][e]=0;console.log(this.gridset)}get_Aspect(){let n=this.gridset,t=this.row,e=this.column,i=this.paddingsize,r=[];for(let s=i;s<t-i;s++){let o=[];for(let l=i;l<e-i;l++){let c=[[n[s-1][l-1],n[s-1][l],n[s-1][l+1]],[n[s][l-1],n[s][l],n[s][l+1]],[n[s+1][l-1],n[s+1][l],n[s+1][l+1]]];o.push(eo(c))}r.push(o)}return r}get_SampleLine(n,t,e,i){let r=e-n,s=i-t,o=[];if(Math.abs(r)<Math.abs(s)){let l=Math.abs(s),c=r/l,a=s/l;for(let h=0;h<l;h++){let u=Math.round(n+h*c),d=t+h*a;o.push([u,d])}}else{let l=Math.abs(r),c=s/l,a=r/l;for(let h=0;h<l;h++){let u=Math.round(t+h*c),d=n+h*a;o.push([d,u])}}return o}get_CellValue(n,t,e){return e==null&&(e=1),this.gridset[n][t]*e}get_CellValueList(n,t){let e=[];for(let i of n){let r=this.get_CellValue(i[0],i[1],t);e.push(r)}return e}splash_AccmulationSerface(n,t,e=0){const i=H(this,Q,et).call(this,-1);let r=[];if(e===-1)return console.log("splash_AccmulationSerface: 起点值为-1,返回空白累积表面"),i;if(n<0||n>=this.row||t<0||t>=this.column)return console.log("splash_AccmulationSerface: 起点不在栅格范围内"),null;if(this.row<3||this.column<3)return console.log("splash_AccmulationSerface: 栅格太小，无法生成累积表面"),null;const s=[0,0,1,-1,1,1,-1,-1,2,-2,2,-2,1,-1,0,0,1,-1,1,-1],o=[1,-1,0,0,1,-1,1,-1,0,0,1,-1,2,-2,1,-1,1,-1,0,0],l=this.row,c=this.column;for(r.push([n,t]),i[n][t]=e;r.length>0;){let[a,h]=r.shift();for(let u=0;u<s.length;u++){let d=a+s[u],f=h+o[u];d>=0&&d<l&&f>=0&&f<c&&i[d][f]===-1&&(i[d][f]=i[a][h]+1,r.push([d,f]))}}return i}toIntGrid(){let n=H(this,Q,et).call(this,0);for(let t=0;t<this.row;t++)for(let e=0;e<this.column;e++)n[t][e]=Math.round(this.gridset[t][e]);return console.log("转化为整数栅格成功"),console.log(n),n}V_get_Contour(n,t,e){let i=e.max,r=e.min,s=(i-r)/t,o=[];for(let m=0;m<t;m++)o.push(Math.round(r+m*s));console.log("等值线值数组"),console.log(o);const l=this.toIntGrid(),c=l.length,a=l[0].length,h=[0,0,1,-1,1,1,-1,-1],u=[1,-1,0,0,1,-1,1,-1],d=H(this,Q,et).call(this,0),f=[],p=[];for(let m=0;m<c;m++)for(let x=0;x<a;x++){if(d[m][x]===1)continue;let w=l[m][x],_=!1,v=[...o,1/0];for(let P=0;P<o.length;P++)if(w<=v[P+1]&&w>v[P]){_=!0;break}if(!_)continue;let M=[],L=[];for(M.push([m,x]),d[m][x]=1,L.push([m,x]);M.length>0;){let[P,S]=M.shift();for(let C=0;C<h.length;C++){let A=P+h[C],E=S+u[C];A>=0&&A<c&&E>=0&&E<a&&d[A][E]===0&&l[A][E]===w&&(d[A][E]=1,M.push([A,E]),L.push([A,E]))}}f.push(L),p.push(w)}for(let m=0;m<f.length;m++){let x=f[m],w=[0,0];for(let _=0;_<x.length;_++)w[0]+=x[_][0],w[1]+=x[_][1];w[0]/=x.length,w[1]/=x.length,x.sort((_,v)=>{let M=Math.atan2(_[0]-w[0],_[1]-w[1]),L=Math.atan2(v[0]-w[0],v[1]-w[1]);return M-L})}let g=0;for(let m=0;m<f.length;m++){let x=f[m],[w,_]=x[0],[v,M]=x[x.length-1],L=Math.sqrt((w-v)*(w-v)+(_-M)*(_-M));g+=L}g/=f.length,g*=.09;for(let m=0;m<f.length;m++){let x=f[m],[w,_]=x[0],[v,M]=x[x.length-1];Math.sqrt((w-v)*(w-v)+(_-M)*(_-M))<=g&&x.push(x[0])}let b=[];for(let m=0;m<f.length;m++){let x=[];for(let w=0;w<f[m].length;w++){let _=this.get_CellPoint_in_MBR(n,f[m][w][0],f[m][w][1]);x.push(_)}b.push(x)}return{value:p,contour:b}}V_RasLine2VecLine(n,t){let e=[];for(let i=0;i<n.length;i++){let r=[];for(let s=0;s<n[i].length;s++){let o=this.get_CellPoint_in_MBR(t,n[i][s][0],n[i][s][1]);r.push(o)}e.push(r)}return e}get_DEM_Slice(n,t,e){let i=e.max,r=e.min,s=(i-r)/n,o=[];for(let a=0;a<=n;a++)o.push(r+a*s);let l=o[t],c=H(this,Q,et).call(this,0);for(let a=0;a<this.row;a++)for(let h=0;h<this.column;h++)this.gridset[a][h]<=l&&(c[a][h]=1);return{data:c,level:l}}V_get_Contour_from_Slice(n,t,e){let i=[],r=[];for(let o=0;o<t;o++){let l=this.get_DEM_Slice(t,o,e),c=l.data,a=l.level,h=this.get_BinaryGrid_Boundary(c,!1);if(h.length!==0)for(let u=0;u<h.length;u++)r.push(Math.round(a)),h[u]!==null&&i.push(h[u])}return s(i,r),{contour:this.V_RasLine2VecLine(i,n),value:r};function s(o,l){for(let c=0;c<o.length;c++){if(o[c].length==0)continue;let a=o[c],h=[0,0];for(let d=0;d<a.length;d++)h[0]+=a[d][0],h[1]+=a[d][1];h[0]/=a.length,h[1]/=a.length;let u=[];for(let d=0;d<a.length;d++){let f=a[d][0]-h[0],p=a[d][1]-h[1],g=Math.atan2(p,f);u.push(g)}for(let d=0;d<u.length;d++)for(let f=d+1;f<u.length;f++)if(u[d]>u[f]){let p=u[d];u[d]=u[f],u[f]=p;let g=a[d];a[d]=a[f],a[f]=g}o[c]=a}for(let c=0;c<o.length;c++){let a=o[c];if(!(a.length<=1)){{let h=a[0][0],u=a[0][1],d=a[a.length-1][0],f=a[a.length-1][1];Math.abs(h-d)<=1&&Math.abs(u-f)<=1&&a.push(a[0])}for(let h=0;h<a.length-1;h++){let u=a[h][0],d=a[h][1],f=a[h+1][0],p=a[h+1][1];if(Math.abs(u-f)>20||Math.abs(d-p)>20){let g=[];for(let m=0;m<=h;m++)g.push(a[m]);let b=[];for(let m=h+1;m<a.length;m++)b.push(a[m]);o.push(g),o.push(b),l.push(l[c]),l.push(l[c]),o.splice(c,1),l.splice(c,1),c--,h--;break}}}}for(let c=0;c<o.length;c++)o[c].length<3&&(o.splice(c,1),l.splice(c,1),c--)}}get_BinaryGrid_Boundary(n,t=!1){let e=[],i=[],r=H(this,Q,et).call(this,0);for(let o=0;o<this.row;o++)for(let l=0;l<this.column;l++)if(r[o][l]==0&&n[o][l]==1){let c=this.get_BinaryGrid_MaxConnected(n,o,l,4,1);e.push(c),r[o][l]=1;for(let a=0;a<c.length;a++){let[h,u]=c[a];r[h][u]=1}}for(let o=0;o<e.length;o++){let l=e[o],c=this.get_BinaryGrid_MaxConnected_Boundary(n,l,1);i.push(c)}return t&&s(n,i),i;function s(o,l){for(let c=0;c<l.length;c++){let a=l[c];for(let h=0;h<a.length;h++){let[u,d]=a[h];o[u][d]=100}}}}get_BinaryGrid_MaxConnected(n,t,e,i,r){if(n===null&&(n=this.gridset),n[t][e]!=r)return[];let s=H(this,Q,et).call(this,0),o=[],l=[0,0,1,-1,1,-1,1,-1],c=[1,-1,0,0,1,-1,-1,1],a=[];for(a.push([t,e]),s[t][e]=1;a.length>0;){let[h,u]=a.shift();o.push([h,u]);for(let d=0;d<l.length;d++){let f=h+l[d],p=u+c[d];f>=0&&f<this.row&&p>=0&&p<this.column&&s[f][p]===0&&n[f][p]===r&&(a.push([f,p]),s[f][p]=1)}}return o.length<i?[]:o}get_BinaryGrid_MaxConnected_Boundary(n,t,e){if(t.length<1)return[];let i=[],r=[0,0,1,-1],s=[1,-1,0,0];for(let o=0;o<t.length;o++){let[l,c]=t[o],a=!1;for(let h=0;h<4;h++){let u=l+r[h],d=c+s[h];if(u>=0&&u<this.row&&d>=0&&d<this.column&&n[u][d]!=e){a=!0;break}}a&&i.push([l,c])}return i}get_CellPoint_in_MBR(n,t,e,i=.1){let[r,s,o,l]=n,c=this.column,a=this.row,h=Math.abs(r-o),u=Math.abs(s-l),d=Math.round(h/c/i)*i,f=Math.round(u/a/i)*i,p=r+d/2+e*d,g=s-f/2-t*f;return new U(p,g)}getSerfaceArea(){const n=[0,1,0,-1],t=[1,0,-1,0];let e=0,i=this.toIntGrid();for(let r=0;r<i.length;r++)for(let s=0;s<i[r].length;s++){let o=i[r][s];if(o>0){e+=2;for(let l=0;l<4;l++){let c=r+n[l],a=s+t[l],h=0;c>=0&&c<i.length&&a>=0&&a<i[r].length&&(h=i[c][a]),e+=Math.max(o-h,0)}}}return e-=this.row*this.column,e}getVolume(){let n=0;for(let t=0;t<this.row;t++)for(let e=0;e<this.column;e++)n+=this.gridset[t][e];return n}getFlowDirection(n=1){let t=[1,2,4,8,16,32,64,128],e=[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1]],i=[];for(let r=0;r<this.row;r++){let s=[];for(let o=0;o<this.column;o++){let l=this.gridset[r][o],c=0,a=0;for(let h=0;h<8;h++){let u=r+e[h][0],d=o+e[h][1],f=0;u>=0&&u<this.row&&d>=0&&d<this.column&&(h==0||h==2||h==4||h==6?f=(this.gridset[u][d]-l)/n:f=(this.gridset[u][d]-l)/n*Math.sqrt(2)),f<c&&(c=f,a=h)}if(c>=0)s.push(0);else{let h=t[a];s.push(h)}}i.push(s)}return i}getAccumulationFlow(n){let t=this.getFlowDirection(n),e=H(this,Q,et).call(this,this.row,this.column,0);for(let r=0;r<this.row;r++)for(let s=0;s<this.column;s++){let o={},l=i(r,s,t,this.row,this.column,o);e[r][s]=l}return e;function i(r,s,o,l,c,a={}){let h=[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1]],u=[128,64,32,16,8,4,2,1],d=0;for(let f=0;f<8;f++){let p=r+h[f][0],g=s+h[f][1];p>=0&&p<l&&g>=0&&g<c&&o[p][g]==u[f]&&(d+=1)}for(let f=0;f<8;f++){let p=r+h[f][0],g=s+h[f][1];p>=0&&p<l&&g>=0&&g<c&&o[p][g]==u[f]&&a[p+"-"+g]==null&&(a[p+"-"+g]=!0,d+=i(p,g,o,l,c,a))}return d}}static fromMatrix(n){let t=n[0],e=new li(n.length,t.length);return e.gridset=n,e}static getramp(n){let t=[],e=1/n;for(let i=0;i<5;i++){let r=[];for(let s=0;s<n;s++)r.push(e*s);t.push(r)}return t}static get_aspect_ramp(n){let t=[],e=360/n;for(let i=0;i<5;i++){let r=[];for(let s=0;s<n;s++)r.push(e*s);t.push(r)}return t}static get_dispersed_ramp(n){let t=[],e=1;for(let i=0;i<5;i++){let r=[];for(let s=0;s<n;s++)r.push(e*s);t.push(r)}return t}static get_Custom_ramp(n){let t=[];for(let e=0;e<5;e++){let i=[];for(let r=0;r<n.length;r++)i.push(n[r]);t.push(i)}return t}static parser1(n,t,e){let i=e.split(","),r=[];for(let s=0;s<n;s++){let o=[];for(let l=0;l<t;l++)o.push(parseFloat(i[s*255+l])*1e3);r.push(o)}return r}};let Z=li;Q=new WeakSet,et=function(n){return Array(this.row).fill().map(()=>Array(this.column).fill(n))},oi=new WeakSet;var ye,ai,we,ci;class Ne{constructor(t){ft(this,ye),ft(this,we),this.data=t,this.ori=t.slice(),this.data=this.data.sort((e,i)=>e-i),this.n=this.data.length,this.max=this.data[this.data.length-1],this.min=this.data[0],this.mean=H(this,ye,ai).call(this),this.q1i=Math.round((this.n+1)/4),this.q3i=Math.round(3*(this.n+1)/4),this.q1=this.data[this.q1i],this.q3=this.data[this.q3i],this.Standard_Deviation=H(this,we,ci).call(this)}Z_Score_Normalization(t){return(t-this.mean)/this.Standard_Deviation}Linear_Normalization(t){return(t-this.min)/(this.max-this.min)}Linear_Normalization_main(t){let e=(t-this.q1)/(this.q3-this.q1);return e>1?1:e<0?0:e}create_box_whisker_plot(t,e,i,r,s,o){let l=Math.abs(i-t),c=Math.abs(r-e)-40,a=20,h=(t+i)/2,u=Math.abs(this.max-this.min),d=c/u,f=l/o;s===0&&(s=10);let p=c/s,g=Math.round(u/s),b=[],m=[];for(let M=1;M<s;M++){let L=[t,a+r+p*M,t-f,a+r+p*M],P=[Math.round(this.min+g*M),t-5*f,a+r+p*M];b.push(L),m.push(P)}let x=[h-2*f,(this.max-this.min)*d+r+a,h+2*f,(this.max-this.min)*d+r+a],w=[h-2*f,(this.min-this.min)*d+r+a,h+2*f,(this.min-this.min)*d+r+a],_=[];_.push([h,(this.max-this.min)*d+r+a,h,(this.min-this.min)*d+r+a]),_.push(x),_.push(w),m.push([this.max,h+2*f,(this.max-this.min)*d+r+a]),m.push([this.min,h+2*f,(this.min-this.min)*d+r+a]);let v=[h-4*f,(this.q1-this.min)*d+r+a,h+4*f,(this.q3-this.min)*d+r+a];return m.push([this.q1,h+4*f,(this.q1-this.min)*d+r+a]),m.push([this.q3,h+4*f,(this.q3-this.min)*d+r+a]),{MBR:[t,e,i,r],YAXI:b,BOX:v,WHISKER:_,YANO:m}}create_step_plot(t,e,i,r,s,o){let l=20,c=Math.abs(i-t)-2*l,a=Math.abs(r-e)-2*l,h=this.max-this.min,u=this.n,d=a/h,f=Math.round(u/o),p=c/o,g=[];for(let b=0;b<o;b++){let m=l+p*b+t,x=f*b,w=r+l+this.ori[x]*d;g.push([m,w])}return g}create_coordinate_box(t,e,i,r,s,o){let l=20,c=Math.abs(i-t)-2*l,a=Math.abs(r-e)-2*l,h=this.max-this.min,u=this.n,d=Math.round(h/s),f=Math.round(u/o),p=c/o,g=a/s,b=[],m=[];for(let M=1;M<s;M++){let L=[t,l+r+g*M,t-5,l+r+g*M],P=[Math.round(this.min+d*M),t-50,l+r+g*M];b.push(L),m.push(P)}let x=[],w=[],_=0,v=[0,l+t,r-25];w.push(v);for(let M=0;M<o;M++){if(_===5){let L=[l+t+p*M,r,l+t+p*M,r-10];x.push(L)}else if(_===10){let L=[l+t+p*M,r,l+t+p*M,r-15],P=[Math.round(0+f*M),l+t+p*M,r-25];x.push(L),w.push(P),_=0}else{let L=[l+t+p*M,r,l+t+p*M,r-5];x.push(L)}_=1+_}return{MBR:[t,e,i,r],y_scale:b,y_mark:m,x_scale:x,x_mark:w}}get_statistics_info(){let t=this.max,e=this.min,i=this.mean,r=this.Standard_Deviation,s=this.n;return{max:t,min:e,avg:i,std:r,volum:s}}}ye=new WeakSet,ai=function(){let n=this.data,t=0;for(let e=0;e<n.length;e++)t=n[e]+t;return t/n.length},we=new WeakSet,ci=function(){let n=this.data,t=this.mean,e=0;for(let i=0;i<n.length;i++)e=Math.pow(n[i]-t,2)+e;return Math.sqrt(e/this.n)};class k{constructor(t,e){this.ctx=t,this.color=e}draw_point(t,e,i=null,r=2){const s=this.ctx.fillStyle;i?this.ctx.fillStyle=i:this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.arc(t,e,r,0,Math.PI*2,!0),this.ctx.fill(),this.ctx.fillStyle=s}draw_pointset(t){for(let e of t)this.draw_point(e.x,e.y)}draw_line(t,e,i=3){let r=this.ctx.strokeStyle;this.ctx.strokeStyle=this.color,this.ctx.lineWidth=i,this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.strokeStyle=r}draw_polygon(t,e=!1){let i=this.ctx.fillStyle;this.ctx.strokeStyle=this.color,this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y);for(let r=1;r<t.length;r++)this.ctx.lineTo(t[r].x,t[r].y);if(e){let r=mt.parseColor(this.color);r.transparent(.8),this.ctx.fillStyle=r.toString(),this.ctx.fill()}this.ctx.closePath(),this.ctx.stroke(),this.ctx.fillStyle=i}draw_polygon2(t,e=!1,i=!1){let r=t.get_VectorList(),s=[];for(let l=0;l<r.length;l++){let c=r[l].sp;s.push(c)}let o=this.ctx.fillStyle;if(this.ctx.strokeStyle=this.color,this.ctx.lineWidth=3,this.ctx.beginPath(),i){s.push(s[0]),s.unshift(s[s.length-2]);let l=s.length;for(let c=0;c<l;c++)if(c==l/2)this.ctx.quadraticCurveTo(s[c].x,s[c].y,s[c+1].x,s[c+1].y);else if(c==0)this.ctx.moveTo(s[0].x,s[0].y),this.ctx.quadraticCurveTo(s[c+1].x,s[c+1].y,s[c+2].x,s[c+2].y),c++;else{if(c==l-1)continue;this.ctx.lineTo(s[c].x,s[c].y)}}else{this.ctx.moveTo(s[0].x,s[0].y);for(let l=1;l<s.length;l++)this.ctx.lineTo(s[l].x,s[l].y)}if(e){console.log("IsFill");let l=mt.parseColor(this.color);l.transparent(.8),this.ctx.fillStyle=l.toString(),this.ctx.fill()}this.ctx.closePath(),this.ctx.stroke(),this.ctx.fillStyle=o}draw_complexline(t,e=!1,i=!1,r=!0){if(r)if(e){this.ctx.strokeStyle=this.color,this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y);for(let o=1;o<t.length-1;o++){let l=(t[o].x+t[o+1].x)/2,c=(t[o].y+t[o+1].y)/2;this.ctx.quadraticCurveTo(t[o].x,t[o].y,l,c)}let s=t.length-1;this.ctx.quadraticCurveTo(t[s].x,t[s].y,t[s].x,t[s].y),this.ctx.stroke()}else{this.ctx.strokeStyle=this.color,this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y);for(let s=1;s<t.length;s++)this.ctx.lineTo(t[s].x,t[s].y);this.ctx.stroke()}if(i)for(let s=0;s<t.length;s++)if(s==0||s==t.length-1){this.draw_point(t[s].x,t[s].y,"yellow");continue}else this.draw_point(t[s].x,t[s].y,"white")}draw_rect(t,e=!1){let i=this.ctx.fillStyle;if(this.ctx.strokeStyle=this.color,this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.moveTo(t[0],t[1]),this.ctx.lineTo(t[2],t[1]),this.ctx.lineTo(t[2],t[3]),this.ctx.lineTo(t[0],t[3]),this.ctx.closePath(),e){let r=mt.parseColor(this.color);r.transparent(.8),this.ctx.fillStyle=r.toString(),this.ctx.fill()}this.ctx.closePath(),this.ctx.stroke(),this.ctx.fillStyle=i}draw_triangle(t,e=!1){let i=this.ctx.fillStyle;if(e){let r=mt.parseColor(this.color);r.transparent(.8),this.ctx.fillStyle=r.toString(),this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y),this.ctx.lineTo(t[1].x,t[1].y),this.ctx.lineTo(t[2].x,t[2].y),this.ctx.closePath(),this.ctx.fill()}this.ctx.strokeStyle=this.color,this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y),this.ctx.lineTo(t[1].x,t[1].y),this.ctx.lineTo(t[2].x,t[2].y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fillStyle=i}draw_circle(t,e,i,r=!1){let s=this.ctx.fillStyle;if(this.ctx.strokeStyle=this.color,this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.arc(t,e,i,0,Math.PI*2,!1),this.ctx.closePath(),this.ctx.stroke(),r){let o=mt.parseColor(this.color);o.transparent(.8),this.ctx.fillStyle=o.toString(),this.ctx.fill()}this.ctx.fillStyle=s}draw_line_arr(t){let e=t[0],i=t[1],r=t[2],s=t[3];this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.lineTo(r,s),this.ctx.strokeStyle=this.color,this.ctx.closePath(),this.ctx.stroke()}draw_GridCell(t,e,i,r,s){this.ctx.fillStyle=s,this.ctx.fillRect(t,e,i,r)}draw_text(t="black",e,i,r){let s=this.ctx.fillStyle;this.ctx.fillStyle=t,this.ctx.font="oblique 20px Arial",this.ctx.fillText(e,i,r),this.ctx.fillStyle=s}}class ao{static Gray(t,e,i){e&&(t=1-t);let r=255*t,s=r,o=r;return i==null?"rgb("+r+","+s+","+o+")":"rgba("+r+","+s+","+o+","+i+")"}static ColorBand_1(t,e){let i,r,s;return t==0&&(i=0,r=0,s=0),t==1&&(i=255,r=0,s=0),t==2&&(i=0,r=255,s=0),t==3&&(i=0,r=0,s=255),e==null?"rgb("+i+","+r+","+s+")":"rgba("+i+","+r+","+s+","+e+")"}static ColorBand_2(t,e){let i,r,s;return t==0&&(i=160,r=32,s=240),t==1&&(i=255,r=105,s=180),t==2&&(i=255,r=165,s=0),t==3&&(i=0,r=255,s=255),e==null?"rgb("+i+","+r+","+s+")":"rgba("+i+","+r+","+s+","+e+")"}static Red(t,e,i){e&&(t=1-t);let r=255*t,s=0,o=0;return i==null?"rgb("+r+","+s+","+o+")":"rgba("+r+","+s+","+o+","+i+")"}static Green(t,e,i){e&&(t=1-t);let r=0,s=255*t,o=0;return i==null?"rgb("+r+","+s+","+o+")":"rgba("+r+","+s+","+o+","+i+")"}static Blue(t,e,i){e&&(t=1-t);let r=0,s=0,o=255*t;return i==null?"rgb("+r+","+s+","+o+")":"rgba("+r+","+s+","+o+","+i+")"}static Yellow(t,e,i){e&&(t=1-t);let r=255*t,s=255*t,o=0;return i==null?"rgb("+r+","+s+","+o+")":"rgba("+r+","+s+","+o+","+i+")"}static Aspact(t){let e,i,r;return t<22.5?[e,i,r]=[255,0,0]:t<67.5?[e,i,r]=[255,165,0]:t<112.5?[e,i,r]=[255,255,0]:t<157.5?[e,i,r]=[0,255,0]:t<202.5?[e,i,r]=[0,255,255]:t<247.5?[e,i,r]=[135,206,250]:t<292.5?[e,i,r]=[0,0,255]:t<337.5?[e,i,r]=[139,0,255]:[e,i,r]=[255,0,0],"rgb("+e+","+i+","+r+")"}static Stadard_Aspact(t,e){let i,r,s;return t==1&&(i=255,r=0,s=0),t==2&&(i=255,r=165,s=0),t==4&&(i=255,r=255,s=0),t==8&&(i=0,r=255,s=0),t==16&&(i=0,r=255,s=255),t==32&&(i=135,r=206,s=250),t==64&&(i=0,r=0,s=255),t==128&&(i=139,r=0,s=255),t==0&&(i=0,r=0,s=0),e==null?"rgb("+i+","+r+","+s+")":"rgba("+i+","+r+","+s+","+e+")"}static Pure(t,e,i){e&&(t=1-t);let r=255*t,s=150*r,o=20*r;return i==null?"rgb("+r+","+s+","+o+")":"rgba("+r+","+s+","+o+","+i+")"}}class mt{static parseColor(t){return t==null||t==null?null:typeof t=="string"?t.startsWith("rgb")?this.parseColorByRGB(t):t.startsWith("#")?this.parseColorByHex(t):this.parseColorByName(t):null}static parseColorByRGB(t){let e=t.substring(t.indexOf("(")+1,t.indexOf(")")).split(",");return e.length==3?new D(parseInt(e[0]),parseInt(e[1]),parseInt(e[2])):e.length==4?new D(parseInt(e[0]),parseInt(e[1]),parseInt(e[2]),parseFloat(e[3])):null}static parseColorByHex(t){let e=t.substring(1),i=[];return e.length==3?(i=[e.substring(0,1),e.substring(1,2),e.substring(2,3)],new D(parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16))):e.length==4?(i=[e.substring(0,1),e.substring(1,2),e.substring(2,3),e.substring(3,4)],new D(parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)/255)):e.length==6?(i=[e.substring(0,2),e.substring(2,4),e.substring(4,6)],new D(parseInt(i[0],16),parseInt(i[1],16),parseInt(i[2],16))):e.length==8?(i=[e.substring(0,2),e.substring(2,4),e.substring(4,6),e.substring(6,8)],new D(parseInt(i[0],16),parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)/255)):null}static parseColorByName(t){return t=="red"?new D(255,0,0):t=="green"?new D(0,255,0):t=="blue"?new D(0,0,255):t=="yellow"?new D(255,255,0):t=="black"?new D(0,0,0):t=="white"?new D(255,255,255):t=="gray"?new D(128,128,128):t=="orange"?new D(255,165,0):t=="purple"?new D(128,0,128):t=="pink"?new D(255,192,203):t=="brown"?new D(165,42,42):t=="cyan"?new D(0,255,255):null}}class D{constructor(t,e,i,r){this.r=t,this.g=e,this.b=i,r!=null&&(this.a=r)}lighter(t){this.r=this.r+t,this.g=this.g+t,this.b=this.b+t}transparent(t){this.a==null&&(this.a=1),this.a=this.a-t,this.a<0&&(this.a=Math.abs(this.a))}toString(){return this.a==null?"rgb("+this.r+","+this.g+","+this.b+")":"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"}}const hi=Object.freeze(Object.defineProperty({__proto__:null,CellValueRenderer:ao,Color:D,ColorParser:mt,pan:k},Symbol.toStringTag,{value:"Module"}));class co{constructor(t,e,i){this.ctx=t,this.color=e,this.polygon=i}draw_Smooth_EndPgn(t,e=!1,i=!1){e?(this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-t),new k(this.ctx,this.color).draw_polygon2(this.polygon,i,!0),this.ctx.restore()):new k(this.ctx,this.color).draw_polygon2(this.polygon,i,!0)}draw(t,e=!1,i=!1){e?(this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-t),new k(this.ctx,this.color).draw_polygon(this.polygon.get_OrderedPointList(),i),this.ctx.restore()):new k(this.ctx,this.color).draw_polygon(this.polygon.get_OrderedPointList(),i)}}class ho{constructor(t,e,i){this.ctx=t,this.color=e,this.point=i}draw(t,e=!1){e?(this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-t),new k(this.ctx,this.color).draw_point(this.point.x,this.point.y)):new k(this.ctx,this.color).draw_point(this.point.x,this.point.y),this.ctx.restore()}draw_Buffer(t,e,i=!1){i?(this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-e),new k(this.ctx,this.color).draw_circle(t.center.x,t.center.y,t.radius,!0)):(console.log("draw_Buffer"),new k(this.ctx,this.color).draw_circle(t.center.x,t.center.y,t.radius,!0)),this.ctx.restore()}}class uo{constructor(t,e,i,r,s){this.ctx=t,this.canvas_height=e,this.color=i,this.contour_curve_list=r,this.contour_curve_value_list=s}draw(t=!1,e=!1,i=!1,r=!0,s=!0,o=0){let l=new k(this.ctx,this.color);if(!t)l.draw_complexline(this.contour_curve_list,e,i,r);else{this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-this.canvas_height);for(let c=0;c<this.contour_curve_list.length;c++){if(this.contour_curve_list[c]===null||this.contour_curve_list[c].length===0)continue;let a=this.contour_curve_list[c],h=new De(a).getSubSetByDP(o);if(l.draw_complexline(h,e,i,r),this.ctx.restore(),s){let u=Math.floor(this.contour_curve_list[c].length/2);l.draw_text("white",this.contour_curve_value_list[c],this.contour_curve_list[c][u].x,this.canvas_height-this.contour_curve_list[c][u].y),this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-this.canvas_height)}else this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-this.canvas_height)}}this.ctx.restore()}}class fo{constructor(t,e,i){this.ctx=t,this.color=e,this.pointset=i}draw(){new k(this.ctx,this.color).draw_pointset(this.pointset.getPointSet())}draw_convex_hull(t=!1){new k(this.ctx,this.color).draw_polygon(this.pointset.getConvexHull(),t)}draw_extent(t=!1){new k(this.ctx,"#00ffff5a").draw_rect(this.pointset.extent,t)}}class po{constructor(t,e,i){this.ctx=t,this.color=e,this.line=new De(i)}draw(t=this.color,e=1,i=!1){new k(this.ctx,t).draw_complexline(this.line.getLine(),i)}draw_DPsmmoth(t=290,e=!1){new k(this.ctx,"rgb(0, 136, 255)").draw_complexline(this.line.getSubSetByDP(t),e)}draw_extent(){new k(this.ctx,"#00ffff5a").draw_rect(this.line.extent)}}class go{constructor(t,e,i){this.ctx=t,this.color=e,this.triangle=i,this.pan=new k(this.ctx,this.color)}draw(t=!1){this.pan.draw_triangle(this.triangle.getTriangle(),t)}draw_EXCircle(t=!1){let e=new k(this.ctx,"red"),i=this.triangle.getEXCCenter();e.draw_circle(i.x,i.y,this.triangle.getEXCRadius(),t),e.draw_point(i.x,i.y)}draw_INCircle(t){let e=this.pan,i=this.triangle.getINCcenter();e.draw_circle(i.x,i.y,this.triangle.getINCRadius(),t),e.draw_point(i.x,i.y)}draw_info(t){let e=this.pan,i=this.triangle.getEXCCenter(),r="(x:"+i.x.toFixed(2)+",y:"+i.y.toFixed(2)+")";t+=r,e.draw_text("black",t,i.x,i.y)}draw_vertices(t,e){let i=new k(this.ctx,t),r=this.triangle.getINCcenter(),s=r.getFootPoint_(this.triangle.a),o=r.getFootPoint_(this.triangle.b),l=r.getFootPoint_(this.triangle.c);i.draw_line(r,s,1),i.draw_line(r,o,1),i.draw_line(r,l,1),e&&(i.draw_point(s.x,s.y,"white",3),i.draw_point(o.x,o.y,"white",3),i.draw_point(l.x,l.y,"white",3))}}class mo{constructor(t,e){this.ctx=t,this.stastic=e}draw_box_whisker_plot(t,e,i,r,s,o,l,c,a){let h=this.stastic.create_box_whisker_plot(t,e,i,r,s,o),u=h.MBR,d=h.YAXI,f=h.WHISKER,p=h.BOX,g=h.YANO,b=new k(this.ctx,"gray"),m=new k(this.ctx,"blue"),x=new k(this.ctx,"green");this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-l),b.draw_rect(u);for(let _ of d)m.draw_line_arr(_);for(let _ of f)m.draw_line_arr(_);x.draw_rect(p),this.ctx.restore(),this.ctx.font="oblique bold 20px Arial";for(let _ of g)this.ctx.fillText(_[0],_[1],l-_[2]);(a==""||a==null)&&(a="box whisker plot");let w=(t+i)/2;this.ctx.fillText(a,w-60,l-e-5)}draw_coordinate_box(t,e,i,r,s,o,l,c,a){let h=this.stastic.create_coordinate_box(t,e,i,r,s,o),u=h.MBR,d=(t+i)/2,f=h.y_scale,p=h.y_mark,g=h.x_scale,b=h.x_mark,m=new k(this.ctx,"gray"),x=new k(this.ctx,"blue");this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-l),m.draw_rect(u);for(let w of f)x.draw_line_arr(w);for(let w of g)x.draw_line_arr(w);this.ctx.restore(),this.ctx.font="oblique bold 20px Arial";for(let w of p)this.ctx.fillText(w[0],w[1],l-w[2]);for(let w of b)this.ctx.fillText(w[0],w[1],l-w[2]);(a==""||a==null)&&(a="blank box"),this.ctx.fillText(a,d,l-e-5)}draw_step_plot(t,e,i,r,s,o,l,c,a,h){let u=this.stastic.create_step_plot(t,e,i,r,s,o);this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-l);let d=new k(this.ctx,a);for(let f=0;f<u.length-1;f++){let p=u[f].concat(u[f+1]);d.draw_line_arr(p)}this.ctx.restore(),this.draw_coordinate_box(t,e,i,r,s,o,l,c,h)}draw_step_plot_single(t,e,i,r,s,o,l,c,a){let h=this.stastic.create_step_plot(t,e,i,r,s,o);this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-l);let u=new k(this.ctx,a);for(let d=0;d<h.length-1;d++){let f=h[d].concat(h[d+1]);u.draw_line_arr(f)}this.ctx.restore()}}class xo{constructor(t,e,i,r,s,o){this.ctx=t,this.grid=e,this.MBR=[i,r,s,o],this.xn=this.grid.column,this.yn=this.grid.row,this.width=Math.abs(this.MBR[0]-this.MBR[2]),this.height=Math.abs(this.MBR[1]-this.MBR[3]),this.dx=this.width/this.xn,this.dy=this.height/this.yn}draw(t,e,i,r,s,o=.1){let l=new k(this.ctx,"#00ffff5a"),c=this.grid.column,a=this.grid.row,h=Math.abs(this.MBR[0]-this.MBR[2]),u=Math.abs(this.MBR[1]-this.MBR[3]),d=Math.round(h/c/o)*o,f=Math.round(u/a/o)*o;this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-e),l.draw_rect(this.MBR);for(let p=0;p<this.grid.row;p++)for(let g=0;g<this.grid.column;g++)l.draw_GridCell(this.MBR[0]+g*d,this.MBR[1]-p*f-f,d,f,t.Colorband_1(this.grid.gridset[p][g]));if(r){let p=Z.getramp(25),g=[this.MBR[2]-100,this.MBR[1]+20,this.MBR[2],this.MBR[1]],b=100/p[0].length,m=20/p.length;for(let x=0;x<p.length;x++)for(let w=0;w<p[0].length;w++)l.draw_GridCell(g[0]+w*b,g[1]-x*m-m,b,m,t.Colorband_1_p(p[x][w]))}this.ctx.restore(),this.ctx.font="oblique bold 20px Arial",this.ctx.fillText(s,this.MBR[0],e-(this.MBR[1]+10))}draw_main(t,e,i,r,s){let o=new k(this.ctx,"#00ffff5a"),l=this.grid.column,c=this.grid.row,a=Math.abs(this.MBR[0]-this.MBR[2]),h=Math.abs(this.MBR[1]-this.MBR[3]),u=Math.round(a/l),d=Math.round(h/c);this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-e),o.draw_rect(this.MBR);for(let f=0;f<this.grid.row;f++)for(let p=0;p<this.grid.column;p++)o.draw_GridCell(this.MBR[0]+p*u,this.MBR[1]-f*d-d,u,d,t.abGray_main(this.grid.gridset[f][p]));if(r){let f=Z.getramp(25),p=[this.MBR[2]-100,this.MBR[1]+20,this.MBR[2],this.MBR[1]],g=100/f[0].length,b=20/f.length;for(let m=0;m<f.length;m++)for(let x=0;x<f[0].length;x++)o.draw_GridCell(p[0]+x*g,p[1]-m*b-b,g,b,t.abGray_main_p(f[m][x]))}this.ctx.restore(),this.ctx.font="oblique bold 20px Arial",this.ctx.fillText(s,this.MBR[0],e-(this.MBR[1]+10))}draw_aspect(t,e,i,r,s,o=.1){let l=new k(this.ctx,"#00ffff5a"),c=this.grid.column,a=this.grid.row,h=Math.abs(this.MBR[0]-this.MBR[2]),u=Math.abs(this.MBR[1]-this.MBR[3]),d=Math.round(h/c/o)*o,f=Math.round(u/a/o)*o;this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-e);for(let p=0;p<this.grid.row;p++)for(let g=0;g<this.grid.column;g++)l.draw_GridCell(this.MBR[0]+g*d,this.MBR[1]-p*f-f,d,f,t.Colorband_2(this.grid.gridset[p][g]));if(r){let p=Z.get_aspect_ramp(8),g=[this.MBR[2]-100,this.MBR[1]+20,this.MBR[2],this.MBR[1]],b=100/p[0].length,m=20/p.length;for(let x=0;x<p.length;x++)for(let w=0;w<p[0].length;w++)l.draw_GridCell(g[0]+w*b,g[1]-x*m-m,b,m,t.Colorband_2(p[x][w]))}this.ctx.restore(),this.ctx.font="oblique bold 20px Arial",(s==""||s==null)&&(s="aspect render model"),this.ctx.fillText(s,this.MBR[0],e-(this.MBR[1]+10))}draw_selected_cell(t,e,i,r){let s=new k(this.ctx,"gray");this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-r),s.draw_GridCell(this.MBR[0]+t*this.dx,this.MBR[1]-e*this.dy-this.dy,this.dx,this.dy,i),this.ctx.restore()}draw_cell_set(t,e,i){for(let r of t)this.draw_selected_cell(r[0],r[1],e,i)}draw_custom(t,e,i,r,s,o,l,c){let a=new k(this.ctx,"#00ffff5a");this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-t);let h=this.dx,u=this.dy;if(i)for(let d=0;d<this.grid.row;d++)for(let f=0;f<this.grid.column;f++)a.draw_GridCell(this.MBR[0]+f*h,this.MBR[1]-d*u-u,h,u,o(s.Linear_Normalization_main(this.grid.gridset[d][f]),r,c));for(let d=0;d<this.grid.row;d++)for(let f=0;f<this.grid.column;f++)a.draw_GridCell(this.MBR[0]+f*h,this.MBR[1]-d*u-u,h,u,o(s.Linear_Normalization(this.grid.gridset[d][f]),r,c));if(e){let d=Z.getramp(25),f=[this.MBR[2]-100,this.MBR[1]+20,this.MBR[2],this.MBR[1]],p=100/d[0].length,g=20/d.length;for(let b=0;b<d.length;b++)for(let m=0;m<d[0].length;m++)a.draw_GridCell(f[0]+m*p,f[1]-b*g-g,p,g,o(d[b][m],r,c))}a.draw_rect(this.MBR),this.ctx.restore(),l!==void 0&&(this.ctx.font="oblique bold 20px Arial",this.ctx.fillText(l,this.MBR[0],t-(this.MBR[1]+10)))}draw_dispersed_custom(t,e,i,r,s,o,l=.1,c){let a=new k(this.ctx,"#00ffff5a");this.ctx.save(),this.ctx.scale(1,-1),this.ctx.translate(0,-t);let h=this.grid.column,u=this.grid.row,d=Math.abs(this.MBR[0]-this.MBR[2]),f=Math.abs(this.MBR[1]-this.MBR[3]),p=Math.round(d/h/l)*l,g=Math.round(f/u/l)*l;for(let b=0;b<this.grid.row;b++)for(let m=0;m<this.grid.column;m++)a.draw_GridCell(this.MBR[0]+m*p,this.MBR[1]-b*g-g,p,g,i(this.grid.gridset[b][m],o));if(e){let b=Z.get_dispersed_ramp(s),m=[this.MBR[2]-100,this.MBR[1]+20,this.MBR[2],this.MBR[1]],x=100/b[0].length,w=20/b.length;if(c==null)for(let _=0;_<b.length;_++)for(let v=0;v<b[0].length;v++)a.draw_GridCell(m[0]+v*x,m[1]-_*w-w,x,w,i(b[_][v],o));else{let _=Z.get_Custom_ramp(c);for(let v=0;v<_.length;v++)for(let M=0;M<_[0].length;M++)a.draw_GridCell(m[0]+M*x,m[1]-v*w-w,x,w,i(_[v][M],o))}}a.draw_rect(this.MBR),this.ctx.restore(),r!==void 0&&(this.ctx.font="oblique bold 20px Arial",this.ctx.fillText(r,this.MBR[0],t-(this.MBR[1]+10)))}getMBR(){return this.MBR}}class yo{constructor(t){this.stastic=t}rgb_renderer(t,e,i){return"rgb("+t+","+e+","+i+")"}rgba_renderer(t,e,i,r){return"rgba("+t+","+e+","+i+","+r+")"}Z_Score_Normalization(t){return(t-this.stastic.mean)/this.stastic.Standard_Deviation}Linear_Normalization(t){return(t-this.stastic.min)/(this.stastic.max-this.stastic.min)}Linear_Normalization_main(t){let e=(t-this.stastic.q1)/(this.stastic.q3-this.stastic.q1);return e>1?1:e<0?0:e}Gray(t){let e=255*this.Linear_Normalization(t),i=e,r=e;return"rgb("+e+","+i+","+r+")"}abGray(t){let e=255*(1-this.Linear_Normalization(t)),i=e,r=e;return"rgb("+e+","+i+","+r+")"}Red(t){let e=255*this.Linear_Normalization(t),i=0,r=0;return"rgb("+e+","+i+","+r+")"}Green(t){let e=this.Linear_Normalization(t),i=0,r=255*e,s=0;return"rgb("+i+","+r+","+s+")"}Blue(t){let e=this.Linear_Normalization(t),i=0,r=0,s=255*e;return"rgb("+i+","+r+","+s+")"}Colorband_1(t){let e=this.Linear_Normalization(t);return e<.333?this.rgb_renderer(0,100*e,255*e):e<.444?this.rgb_renderer(155*e,155*e,55*e):e<.555?this.rgb_renderer(55*e,155*e,55*e):e<.777?this.rgb_renderer(255*e,255*e,155*e):this.rgb_renderer(255*e,255*e,255*e)}Colorband_1_p(t){let e=t;return e<.333?this.rgb_renderer(0,100*e,255*e):e<.444?this.rgb_renderer(155*e,155*e,55*e):e<.555?this.rgb_renderer(55*e,155*e,55*e):e<.777?this.rgb_renderer(255*e,255*e,155*e):this.rgb_renderer(255*e,255*e,255*e)}Colorband_2(t){return t<22.5?this.rgb_renderer(255,0,0):t<67.5?this.rgb_renderer(255,165,0):t<112.5?this.rgb_renderer(255,255,0):t<157.5?this.rgb_renderer(0,255,0):t<202.5?this.rgb_renderer(0,255,255):t<247.5?this.rgb_renderer(135,206,250):t<292.5?this.rgb_renderer(0,0,255):t<337.5?this.rgb_renderer(139,0,255):this.rgb_renderer(255,0,0)}Gray_main(t){let e=255*this.Linear_Normalization_main(t),i=e,r=e;return"rgb("+e+","+i+","+r+")"}Gray_main_p(t){let e=255*t,i=e,r=e;return"rgb("+e+","+i+","+r+")"}abGray_main(t){let e=255*(1-this.Linear_Normalization_main(t)),i=e,r=e;return"rgb("+e+","+i+","+r+")"}abGray_main_p(t){let e=255*(1-t),i=e,r=e;return"rgb("+e+","+i+","+r+")"}Gray_Z_score_Nor(t){let e=255*this.Z_Score_Normalization(t),i=e,r=e;return"rgb("+e+","+i+","+r+")"}}const pt=Object.freeze(Object.defineProperty({__proto__:null,ColorRamp:yo,Contour_CurveView:uo,GridView:xo,LineView:po,PointSetView:fo,PointView:ho,PolygonView:co,StasticView:mo,TriangleView:go},Symbol.toStringTag,{value:"Module"}));function wo(n){Wt([{name:"请求并渲染地形数据",action:()=>Ot(n,1)},{name:"计算水流坡向",action:()=>Ot(n,2)},{name:"计算累计流量",action:()=>Ot(n,3)},{name:"计算累计流量（二值化）",action:()=>Ot(n,4)},{name:"clear",action:()=>Et(n)}])}function Ot(n,t=1){Et(n),Rn.get("data.csv").then(e=>{document.querySelector("#components");let i=document.createElement("canvas");i.height=191,i.width=297;let r=So(e.data),s=Z.fromMatrix(r);switch(Yr([-107.92357269467898,38.69203706472152,-107.84398506918498,38.640907812582896],()=>i,n),t){case 1:ln(i,s);break;case 2:bo(i,s);break;case 3:_o(i,s);break;case 4:Mo(i,s);break;default:ln(i,s);break}}),vo()}function ln(n,t){let e=new pt.GridView(n.getContext("2d"),t,0,191,297,0),i=new Ne(t.get1DArray()),r=new pt.ColorRamp(i);e.draw(r,n.height,n.width,!0,"地形渲染视图")}function bo(n,t){let e=Z.fromMatrix(t.getFlowDirection());new pt.GridView(n.getContext("2d"),e,0,191,297,0).draw_dispersed_custom(n.height,!0,hi.CellValueRenderer.Stadard_Aspact,"坡向测试视图",9,1,.1,[0,1,2,4,8,16,32,64,128])}function _o(n,t){let e=Z.fromMatrix(t.getAccumulationFlow()),i=new pt.GridView(n.getContext("2d"),e,0,191,297,0),r=new Ne(e.get1DArray()),s=new pt.ColorRamp(r);i.draw(s,n.height,n.width,!0,"累积流量测试视图（重分类后）")}function Mo(n,t){let e=Z.fromMatrix(t.getAccumulationFlow());e.reClassify_Binary_(100);let i=new pt.GridView(n.getContext("2d"),e,0,191,297,0),r=new Ne(e.get1DArray()),s=new pt.ColorRamp(r);i.draw(s,n.height,n.width,!0,"累积流量测试视图（重分类后）")}function So(n){let t=n.split(`
`),e=[];for(let i of t){let r=i.split(","),s=[];for(let o of r){let l=parseInt(o);isNaN(l)&&(l=0),s.push(l)}e.push(s)}return e.pop(),e}function vo(n=document.querySelector(".Legend")){n.innerHTML="";let t=document.createElement("canvas");t.height=n.clientHeight,t.width=n.clientWidth,n.appendChild(t),Ao(t.getContext("2d"),t.width/2,t.height/2)}function Ao(n,t,e){const i=hi.CellValueRenderer.Stadard_Aspact,r=[1,2,4,8,16,32,64,128];let s=2*Math.PI/8,o=-.39269908169872414,l=50;for(let d=0;d<r.length;d++){let f=i(r[d]);n.beginPath(),n.fillStyle=f,n.moveTo(t,e),n.arc(t,e,l,o+d*s,o+(d+1)*s),n.fill(),n.closePath()}let c=l+15,a=["N","NE","E","SE","S","SW","W","NW"],h=[t,t+c/Math.sqrt(2),t+c,t+c/Math.sqrt(2),t,t-c/Math.sqrt(2),t-c,t-c/Math.sqrt(2)],u=[e-c,e-c/Math.sqrt(2),e,e+c/Math.sqrt(2),e+c,e+c/Math.sqrt(2),e,e-c/Math.sqrt(2)];for(let d=0;d<a.length;d++)n.beginPath(),n.fillStyle="black",n.font="10px serif",n.fillText(a[d],h[d],u[d]),n.closePath()}class Co extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"});this.data=this.getAttribute("data"),this.data=JSON.parse(this.data),this.labels=this.getAttribute("labels"),this.labels=JSON.parse(this.labels),this.name=this.getAttribute("name");const e=document.createElement("canvas");e.setAttribute("id","myChart"),t.appendChild(e),Eo(e,this.data,this.labels,this.name)}}function Eo(n,t,e,i){const r=n.getContext("2d");return new Chart(r,{type:"line",data:{labels:e,datasets:[{label:"游客人数",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:t}]},options:{plugins:{title:{display:!0,text:i+"-逐小时人流量",font:{size:20}}},scales:{x:{display:!0,title:{display:!0,text:"时间",font:{size:10,weight:"bold",lineHeight:1.2},padding:{top:20,left:0,right:0,bottom:0}}},y:{display:!0,title:{display:!0,text:"人流量： 人/小时",font:{size:10,style:"normal",lineHeight:1.2},padding:{top:30,left:0,right:0,bottom:0}}}}}})}class ui extends HTMLElement{constructor(e,i,r=document.querySelector(".diolague")){super();R(this,"member");R(this,"posts");this.member=e,this.posts=i;const s=this.attachShadow({mode:"open"}),o=document.createElement("button");o.setAttribute("class","closeButton"),o.textContent="X",o.addEventListener("click",()=>{r.style.display="none";let m=document.querySelector(".DarkLayer");m.style.display="none",s.innerHTML=""});const l=document.createElement("div");l.setAttribute("class","wrapper");let c=document.createElement("style");c.textContent=`
        .wrapper{
            width: 100%;
            height: 920px;
            background-color: rgb(255, 255, 255, 0.5);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            overflow: auto;

        }
        
        .closeButton{
            position: absolute;
            top: 0;
            right: 0;
            border: none;
            background-color: red;
            border-radius: 30%;
            width: 30px;
            height: 30px;
            font-size: 20px;
            color: white;
        }

        .closeButton:hover{
            background-color: rgb(255, 0, 0, 0.5);
        }

        `,s.appendChild(c),l.appendChild(o),s.appendChild(l);let a=[],h=[];for(let m=0;m<this.member.length;m++){let x=document.createElement("div");x.setAttribute("class","memberDiv");let w=document.createElement("div");w.setAttribute("class","memberName"),w.textContent=this.member[m][0];let _=document.createElement("a");_.setAttribute("class","memberLink"),_.setAttribute("href",this.member[m][1]),_.setAttribute("target","_blank");let v=document.createElement("img");v.setAttribute("class","memberImg"),v.setAttribute("src",this.member[m][2]),_.appendChild(v),x.appendChild(w),x.appendChild(_),a.push(x)}for(let m=0;m<this.posts.length;m++){let x=document.createElement("div");x.setAttribute("class","postDiv");let w=document.createElement("div");w.setAttribute("class","postName"),w.textContent=this.posts[m][0];let _=document.createElement("div");_.setAttribute("class","postText"),_.textContent=this.posts[m][1];let v=document.createElement("img");v.setAttribute("class","postImg"),v.setAttribute("src",this.posts[m][2]),x.appendChild(w),x.appendChild(_),x.appendChild(v),h.push(x)}let u=document.createElement("div");u.setAttribute("class","memberWrapper");let d=document.createElement("div");d.setAttribute("class","memberTitle"),d.textContent="成员介绍",u.appendChild(d),a.forEach(m=>{u.appendChild(m)});let f=document.createElement("div");f.setAttribute("class","postWrapper");let p=document.createElement("div");p.setAttribute("class","postTitle"),p.textContent="景点介绍",f.appendChild(p),h.forEach(m=>{f.appendChild(m)}),l.appendChild(f),l.appendChild(u);let g=document.createElement("style");g.textContent=`
        .memberWrapper{
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
          }

          .memberTitle{
            font-size: 30px;
            font-weight: bold;
          }

          .memberDiv{
            width: 100%;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .memberName{
            font-size: 20px;
            font-weight: bold;
            margin-right: 20px;
          }

          .memberLink{
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .memberImg{
            width: 100px;
            height: 100px;
            border-radius: 50%;
          }          
          `;let b=document.createElement("style");b.textContent=`
        .postWrapper{
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
          }

          .postTitle{
            font-size: 30px;
            font-weight: bold;
          }

          .postDiv{
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
          }

          .postName{
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
          }

          .postText{
            border: 1px solid black;
            border-radius: 10px;
            background-color: rgb(255, 255, 255, 0.5);
          }

          .postImg{
            border-radius: 10px;
          }

          `,s.appendChild(g),s.appendChild(b)}}class Ro extends HTMLElement{constructor(e){super();R(this,"dataList");this.dataList=e;const i=this.attachShadow({mode:"open"}),r=document.createElement("div");r.setAttribute("class","wrapper");const s=document.createElement("style");s.textContent=`
        .wrapper{
            width: 600px;
            height: 920px;
            background-color: rgb(255, 255, 255, 0.5);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            overflow: auto;
        }
        `,i.appendChild(s),this.dataList.forEach(o=>{const l=new di(o[0],o[1],o[2]);r.appendChild(l)}),i.appendChild(r)}}class di extends HTMLElement{constructor(e,i,r="white"){super();R(this,"name");R(this,"url");R(this,"backgroundColor");this.name=e,this.url=i;const s=this.attachShadow({mode:"open"}),o=document.createElement("div");o.setAttribute("class","wrapper");const l=document.createElement("div");l.setAttribute("class","name"),l.textContent=e;const c=document.createElement("div");c.setAttribute("class","url"),c.textContent=i;const a=document.createElement("style");a.textContent=`
        .wrapper{
            width: 600px;
            height: 60px;
            background-color: ${r};
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            overflow: auto;
        }
        .name{
            font-size: 20px;
            font-weight: bold;
            background-color: white;
        }

        .url{
            font-size: 15px;
            background-color: white;
        }`,s.appendChild(a),o.appendChild(l),o.appendChild(c),s.appendChild(o)}}const at=To(),Lo=Oo(at),Po=[["yield-info",Co],["post-card",jn],["flow-info",Ln],["about-info",ui],["paths-info",Kn],["weather-info",Yn],["tod-node",di],["to-d",Ro],["btn-list",qn],["btn-node",Fn]];Io(Po);mi(document.querySelector("#toolBar"),[{name:"景点客流展示",action:()=>ss(at)},{name:"餐饮查询",action:()=>bs(at)},{name:"热力图",action:()=>ks(at,Lo)},{name:"最短路径查询",action:()=>zs(at)},{name:"栅格",action:()=>wo(at)},{name:"toggle组件",action:()=>ko()},{name:"关于",action:()=>Do()},{name:"清除组件",action:()=>Bo()}],20);function Bo(n=document.querySelector("#components")){n.innerHTML="",at.clearOverlays()}function ko(n=document.querySelector("#components")){n.style.display=n.style.display==="none"?"block":"none"}function To(){var n=new BMapGL.Map("allmap");return n.centerAndZoom(new BMapGL.Point(-107.88471436035084,38.666533188351195),15),n.enableScrollWheelZoom(!0),n}function Oo(n){var t=new mapvgl.View({map:n});return t}function Io(n){n.forEach(([t,e])=>{customElements.define(t,e)})}function Do(n=document.querySelector(".diolague")){n.style.display="block";let t=document.querySelector(".DarkLayer");t.style.display="block";let e=[["LM","https://github.com/lm17865996839","https://avatars.githubusercontent.com/u/137787028?v=4"],["ZQY","https://github.com/zqy716","https://avatars.githubusercontent.com/u/137897135?v=4"],["LJY","",""],["pzq","https://github.com/pzq123456","https://avatars.githubusercontent.com/u/82391775?s=400&u=97bc1bb95645ba4706c8098649a8b7f8642f2cbd&v=4"]],i=[["景点1","Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur. Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ","https://th.bing.com/th/id/OIP.wJTY76nSSoIuGgPMirHxOwHaE6?w=281&h=186&c=7&r=0&o=5&pid=1.7"],["景点2","Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur. Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ","https://th.bing.com/th/id/OIP.olcJsUUpkoQZS5_XVWKP9AHaEL?w=330&h=186&c=7&r=0&o=5&pid=1.7"],["景点3","Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur. Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ","https://th.bing.com/th/id/OIP.01UVN2O7t0CZWrc5QP0IyAHaD6?w=300&h=180&c=7&r=0&o=5&pid=1.7"]];const r=new ui(e,i,n);n.appendChild(r)}
